<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YCBB</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Marked.js для парсинга Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* Базовые стили для всего документа */
        body {
            margin: 0;
            padding: 0;
            background-color: #000000; /* Черный фон */
            color: #e1d9ce; /* Светлый цвет текста */
            font-family: 'Orbitron', sans-serif; /* Футуристический шрифт */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Предотвращение горизонтальной прокрутки */
        }

        /* Вспомогательные классы */
        .flex-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .hidden {
            display: none !important;
        }

        /* Стили для заголовка */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8); /* Слегка прозрачный фон */
        }

        .header-button {
            background-color: #e1d9ce;
            color: #000000; /* Черный текст */
            border: none;
            border-radius: 15px; /* Скругленные углы */
            padding: 0.75rem 1.25rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3); /* Бежево-белое свечение */
            text-shadow: none; /* Без тени для текста */
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-button:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 25px rgba(255, 255, 255, 0.5); /* Более яркое свечение при наведении */
            transform: translateY(-2px);
        }

        .header-button i {
            margin-right: 0.5rem;
        }

        /* Стили для управления музыкой */
        .music-controls-container {
            position: relative;
            margin-left: auto; /* Прижимает к правому краю */
        }

        #music-hamburger {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 50%; /* Круглая кнопка */
            width: 45px;
            height: 45px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3); /* Бежево-белое свечение */
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #music-hamburger:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 25px rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        #music-menu {
            position: absolute;
            top: 60px; /* Позиция под гамбургером */
            right: 0;
            background-color: rgba(30, 30, 30, 0.95);
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            display: none; /* Скрыто по умолчанию */
            flex-direction: column;
            gap: 10px;
            min-width: 150px;
        }

        #music-menu.show {
            display: flex;
        }

        .music-menu-item {
            background-color: #e1d9ce;
            color: #000000; /* Черный текст */
            border: none;
            border-radius: 10px;
            padding: 0.5rem 1rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5); /* Бежево-белое свечение */
            transition: all 0.2s ease;
        }

        .music-menu-item:hover {
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
            background-color: #f0e9e0;
        }

        /* Основная область контента */
        .container {
            flex-grow: 1;
            padding: 2rem 1rem;
            margin-top: 80px; /* Отступ для фиксированного заголовка */
            margin-bottom: 120px; /* Отступ для фиксированного футера */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
        }

        /* Стили для конкретных страниц */
        .page {
            width: 100%;
            max-width: 900px; /* Максимальная ширина контента */
            padding: 1rem;
            box-sizing: border-box;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Сетка кнопок для главной страницы */
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 0;
        }

        /* Общий стиль кнопок */
        .main-button, .sub-button {
            background-color: #e1d9ce;
            color: #000000; /* Черный текст */
            border: none;
            border-radius: 20px; /* Более скругленные */
            padding: 1.5rem 1rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5), 0 0 15px rgba(255, 255, 255, 0.3); /* Бежево-белое свечение */
            text-shadow: none; /* Удаление белой тени текста */
            transition: all 0.3s ease;
            text-transform: uppercase;
            white-space: normal; /* Разрешить перенос текста */
            word-wrap: break-word; /* Перенос длинных слов */
            line-height: 1.3;
            min-height: 80px; /* Минимальная высота кнопок */
        }

        .main-button:hover, .sub-button:hover {
            box-shadow: 0 0 12px rgba(255, 255, 255, 0.7), 0 0 20px rgba(255, 255, 255, 0.5); /* Более яркое свечение при наведении */
            transform: translateY(-3px);
        }

        /* Неоновое зеленое свечение для кнопок LLM и связанных элементов */
        .llm-button {
            background-color: #e1d9ce; /* Светлый фон */
            color: #000000; /* Черный текст для читаемости */
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.25rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(138, 255, 138, 0.5), 0 0 15px rgba(138, 255, 138, 0.3); /* Нежное зеленое свечение */
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .llm-button:hover {
            box-shadow: 0 0 12px rgba(138, 255, 138, 0.7), 0 0 20px rgba(138, 255, 138, 0.5); /* Более яркое зеленое свечение при наведении */
            transform: translateY(-2px);
        }

        #send-chat-button, #llm-modal-submit-button, #message-box-close-button {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.25rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(138, 255, 138, 0.5); /* Нежное зеленое свечение */
            transition: all 0.3s ease;
        }

        #send-chat-button:hover, #llm-modal-submit-button:hover, #message-box-close-button:hover {
            box-shadow: 0 0 12px rgba(138, 255, 138, 0.7), 0 0 20px rgba(138, 255, 138, 0.5);
            transform: translateY(-2px);
        }

        /* Стили для содержимого конкретных страниц */
        .page-title {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #e1d9ce;
            text-shadow: 0 0 10px #fff;
        }

        .page-section {
            background-color: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            text-align: left;
            word-wrap: break-word;
            line-height: 1.6;
        }

        .page-section h3 {
            font-size: 1.8rem;
            color: #e1d9ce;
            text-shadow: 0 0 5px #fff;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        .page-section p, .page-section ul {
            font-size: 1.1rem;
            color: #c0c0c0;
        }

        /* Изменен цвет ссылок на бело-серый */
        .page-section a {
            color:  #0A4F3D; /* Бело-серый текст для ссылок */
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .page-section a:hover {
            color: #e1d9ce; /* Немного светлее при наведении */
            text-decoration: underline;
        }

        .movie-cover {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            margin-bottom: 1rem;
            border-radius: 10px;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Таймер Pomodoro */
        #pomodoro-timer {
            font-size: 4rem;
            color: #e1d9ce; /* Светлый цвет текста */
            text-shadow: 0 0 10px #fff; /* Нежное белое свечение */
            margin-bottom: 1rem;
        }

        .timer-controls button {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); /* Бежево-белое свечение */
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .timer-controls button:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
        }

        /* Кнопки футера */
        .footer {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 1rem;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8); /* Слегка прозрачный фон */
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .footer.hidden-on-chat {
            transform: translateY(100%); /* Сдвигаем вниз */
            opacity: 0; /* Делаем невидимым */
            pointer-events: none; /* Отключаем события мыши */
        }

        .footer-button {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 15px;
            padding: 0.75rem 1.5rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3); /* Бежево-белое свечение */
            text-shadow: none; /* Без тени текста */
            transition: all 0.3s ease;
        }

        .footer-button:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 25px rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        /* Контейнер чата AI */
        .chat-container {
            position: fixed;
            bottom: 80px; /* Скорректировано, чтобы быть над футером */
            left: 0;
            right: 0;
            background-color: rgba(10, 10, 10, 0.95);
            padding: 1rem;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
            z-index: 999; /* Ниже заголовка, выше основного контента */
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            max-height: calc(30vh - 80px); /* Регулировка максимальной высоты с учетом нижнего отступа */
            transition: max-height 0.3s ease-in-out;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }

        .chat-container.expanded {
            max-height: calc(70vh - 80px); /* Регулировка расширенной высоты */
        }

        #chat-toggle-button {
            background: none;
            border: none;
            color: #e1d9ce;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            width: 100%;
            text-align: center;
            margin-bottom: 0.5rem;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            transition: background-color 0.2s ease;
        }

        #chat-toggle-button:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .chat-close-button {
            background: none;
            border: none;
            color: #e1d9ce;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.2rem 0.5rem;
            transition: color 0.2s ease;
        }

        .chat-close-button:hover {
            color: rgba(138, 255, 138, 0.8);
        }


        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
            padding-right: 10px; /* Для полосы прокрутки */
            font-size: 0.9rem;
            line-height: 1.5;
            color: #c0c0c0;
        }

        .chat-message {
            margin-bottom: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 10px;
            max-width: 80%;
            display: flex; /* Использование flexbox для содержимого сообщения */
            align-items: flex-start; /* Выравнивание элементов по началу */
            gap: 10px; /* Промежуток между текстом и кнопкой */
        }

        .chat-message.user {
            background-color: #555;
            align-self: flex-end;
            margin-left: auto;
            color: #fff;
            flex-direction: row-reverse; /* Для сообщений пользователя, кнопка слева */
        }

        .chat-message.ai {
            background-color: #333;
            align-self: flex-start;
            margin-right: auto;
            color: #e1d9ce;
            flex-direction: row; /* Для сообщений AI, кнопка справа */
        }

        .chat-message p {
            margin: 0;
            flex-grow: 1; /* Разрешить тексту занимать доступное пространство */
        }

        .chat-input-area {
            display: flex;
            gap: 10px;
        }

        #chat-input {
            flex-grow: 1;
            padding: 0.75rem;
            border: 1px solid #555;
            border-radius: 10px;
            background-color: #222;
            color: #e1d9ce; /* Светлый текст для темного фона */
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            resize: vertical;
        }

        #chat-input:focus {
            outline: none;
            border-color: rgba(138, 255, 138, 0.6); /* Нежное зеленое свечение при фокусе */
            box-shadow: 0 0 8px rgba(138, 255, 138, 0.4); /* Нежное зеленое свечение при фокусе */
        }

        .attachment-button, .read-aloud-button {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(138, 255, 138, 0.5); /* Нежное зеленое свечение */
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0; /* Предотвращает сжатие кнопки */
        }

        .attachment-button:hover, .read-aloud-button:hover {
            box-shadow: 0 0 12px rgba(138, 255, 138, 0.7), 0 0 20px rgba(138, 255, 138, 0.5);
            transform: translateY(-2px);
        }

        /* Индикатор загрузки для чата AI и модального окна */
        .loading-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #8aff8a;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Общие стили модального окна LLM */
        .llm-modal {
            position: fixed;
            z-index: 1001; /* Поверх всего остального */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8); /* Темное наложение */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .llm-modal-content {
            background-color: rgba(30, 30, 30, 0.95);
            margin: auto;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            width: 90%;
            max-width: 600px;
            position: relative;
            animation: zoomIn 0.3s ease-out;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .llm-modal-close-button {
            color: #e1d9ce;
            font-size: 2rem;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .llm-modal-close-button:hover,
        .llm-modal-close-button:focus {
            color: rgba(138, 255, 138, 0.8); /* Нежное зеленое при наведении */
        }

        #llm-modal-title {
            color: #e1d9ce;
            text-shadow: 0 0 8px #fff;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .llm-modal-input-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        #llm-modal-textarea {
            width: calc(100% - 20px);
            padding: 10px;
            border: 1px solid #555;
            border-radius: 10px;
            background-color: #222;
            color: #e1d9ce; /* Светлый текст для темного фона */
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            resize: vertical;
            min-height: 80px;
        }

        #llm-modal-textarea:focus {
            outline: none;
            border-color: rgba(138, 255, 138, 0.6); /* Нежное зеленое свечение при фокусе */
            box-shadow: 0 0 8px rgba(138, 255, 138, 0.4); /* Нежное зеленое свечение при фокусе */
        }

        #llm-modal-response-area {
            background-color: #1a1a1a;
            border-radius: 10px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #444;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        #llm-modal-response-text {
            color: #c0c0c0;
            white-space: pre-wrap; /* Сохранение пробелов и переносов строк */
            word-wrap: break-word;
        }

        .image-preview-container {
            margin-top: 10px;
            text-align: center;
        }

        .image-preview {
            max-width: 100%;
            max-height: 150px;
            border-radius: 10px;
            object-fit: contain;
            margin-bottom: 5px;
        }

        .clear-image-button {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 5px;
            padding: 0.3rem 0.6rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .clear-image-button:hover {
            background-color: #f0e9e0;
        }

        /* Стили для пользовательского окна сообщений */
        .message-box {
            position: fixed;
            z-index: 1002; /* Поверх модального окна LLM */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .message-box-content {
            background-color: rgba(30, 30, 30, 0.95);
            margin: auto;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            width: 80%;
            max-width: 400px;
            text-align: center;
            animation: zoomIn 0.3s ease-out;
        }

        #message-box-text {
            font-size: 1.2rem;
            color: #e1d9ce;
            margin-bottom: 1.5rem;
        }

        /* Модальное окно выбора загрузки изображения */
        #image-upload-choice-modal {
            position: fixed;
            z-index: 1003; /* Поверх окна сообщений */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #image-upload-choice-modal-content {
            background-color: rgba(30, 30, 30, 0.95);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #image-upload-choice-modal-content button {
            background-color: #e1d9ce;
            color: #000000;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }

        #image-upload-choice-modal-content button:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
        }

        /* Адаптивные настройки */
        @media (max-width: 768px) {
            .header {
                padding: 0.75rem;
            }

            .header-button {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }

            #music-hamburger {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .container {
                padding: 1rem 0.5rem;
                margin-top: 70px;
                margin-bottom: 100px;
            }

            .button-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 15px;
            }

            .main-button, .sub-button, .llm-button {
                padding: 1rem 0.8rem;
                font-size: 0.9rem;
                min-height: 60px;
            }

            .page-title {
                font-size: 2rem;
                margin-bottom: 1.5rem;
            }

            .page-section {
                padding: 1rem;
                margin-bottom: 1rem;
            }

            .page-section h3 {
                font-size: 1.5rem;
            }

            .page-section p, .page-section ul {
                font-size: 1rem;
            }

            #pomodoro-timer {
                font-size: 3rem;
            }

            .timer-controls button {
                padding: 0.6rem 1.2rem;
                font-size: 1rem;
            }

            .footer {
                flex-direction: column;
                gap: 10px;
                padding: 0.75rem;
            }

            .footer-button {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }

            .chat-container {
                padding: 0.75rem;
            }

            #chat-input {
                padding: 0.6rem;
                font-size: 0.9rem;
            }

            #send-chat-button {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }

            .llm-modal-content, .message-box-content {
                padding: 1.5rem;
            }

            #llm-modal-title {
                font-size: 1.5rem;
            }

            #llm-modal-textarea {
                font-size: 0.9rem;
            }

            #llm-modal-submit-button {
                font-size: 0.9rem;
            }

            #llm-modal-response-text {
                font-size: 0.9rem;
            }

            #message-box-text {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .button-grid {
                grid-template-columns: 1fr; /* Один столбец на очень маленьких экранах */
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button id="back-button" class="header-button hidden"><i class="fas fa-arrow-left"></i> Назад</button>
        <div class="music-controls-container">
            <button id="music-hamburger" class="header-button"><i class="fas fa-music"></i></button>
            <div id="music-menu" class="music-menu-content">
                <button id="music-play-pause" class="music-menu-item"><i class="fas fa-play"></i> / <i class="fas fa-pause"></i></button>
                <button id="music-next" class="music-menu-item"><i class="fas fa-forward"></i> Далее</button>
                <button id="music-prev" class="music-menu-item"><i class="fas fa-backward"></i> Назад</button>
            </div>
        </div>
    </div>

    <div class="container" id="app-container">
        </div>

    <div class="footer" id="main-footer">
        
        <button id="support-ai-button" class="footer-button">Поддержка AI</button>
    </div>

    <div id="chat-container" class="chat-container hidden">
        <div class="chat-header">
            <button id="chat-toggle-button">Спроси, что интересно <i class="fas fa-chevron-up"></i></button>
            <button id="chat-close-button" class="chat-close-button">×</button>
        </div>
        <div id="chat-messages"></div>
        <div class="chat-input-area">
            <button id="mic-button" class="attachment-button"><i class="fas fa-microphone"></i></button>
            <button id="chat-attachment-button" class="attachment-button"><i class="fas fa-paperclip"></i></button>
            <input type="text" id="chat-input" placeholder="Введите ваше сообщение...">
            <button id="send-chat-button">Отправить</button>
        </div>
        <div id="chat-image-preview-container" class="image-preview-container hidden">
            <img id="chat-image-preview" class="image-preview" src="" alt="Предварительный просмотр изображения">
            <button id="chat-clear-image-button" class="clear-image-button">Очистить</button>
        </div>
    </div>

    <div id="llm-modal" class="llm-modal hidden">
        <div class="llm-modal-content">
            <span class="llm-modal-close-button">×</span>
            <h3 id="llm-modal-title"></h3>
            <div id="llm-modal-input-area" class="llm-modal-input-area">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <button id="llm-modal-attachment-button" class="attachment-button"><i class="fas fa-paperclip"></i></button>
                    <textarea id="llm-modal-textarea" placeholder="Введите ваш запрос..." rows="4"></textarea>
                </div>
                <div id="llm-modal-image-preview-container" class="image-preview-container hidden">
                    <img id="llm-modal-image-preview" class="image-preview" src="" alt="Предварительный просмотр изображения">
                    <button id="llm-modal-clear-image-button" class="clear-image-button">Очистить</button>
                </div>
                <button id="llm-modal-submit-button">Отправить</button>
            </div>
            <div id="llm-modal-response-area">
                <p id="llm-modal-response-text"></p>
                <div class="loading-indicator hidden" id="llm-modal-loading"></div>
            </div>
        </div>
    </div>

    <div id="message-box" class="message-box hidden">
        <div class="message-box-content">
            <p id="message-box-text"></p>
            <button id="message-box-close-button">ОК</button>
        </div>
    </div>

    <div id="image-upload-choice-modal" class="message-box hidden">
        <div id="image-upload-choice-modal-content" class="message-box-content">
            <p>Выберите источник изображения:</p>
            <button id="take-photo-button"><i class="fas fa-camera"></i> Сделать фото</button>
            <button id="choose-from-device-button"><i class="fas fa-upload"></i> Выбрать из устройства</button>
            <button id="image-upload-choice-cancel-button" class="clear-image-button">Отмена</button>
        </div>
    </div>

    <input type="file" accept="image/*" capture="camera" id="image-upload-camera" class="hidden">
    <input type="file" accept="image/*" id="image-upload-file" class="hidden">


    <audio id="background-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        Ваш браузер не поддерживает аудио элемент.
    </audio>

    <script>
        // --- Глобальные переменные ---
        const appContainer = document.getElementById('app-container');
        const backButton = document.getElementById('back-button');
        const musicHamburger = document.getElementById('music-hamburger');
        const musicMenu = document.getElementById('music-menu');
        const musicPlayPauseButton = document.getElementById('music-play-pause');
        const musicNextButton = document.getElementById('music-next');
        const musicPrevButton = document.getElementById('music-prev');
        const backgroundMusic = document.getElementById('background-music');
        const mainFooter = document.getElementById('main-footer'); // Добавлено для управления видимостью футера
        const supportChatButton = document.getElementById('support-chat-button');
        const supportAiButton = document.getElementById('support-ai-button');
        const chatContainer = document.getElementById('chat-container');
        const chatToggleButton = document.getElementById('chat-toggle-button');
        const chatCloseButton = document.getElementById('chat-close-button'); // Новая кнопка закрытия чата
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendChatButton = document.getElementById('send-chat-button');
        const chatAttachmentButton = document.getElementById('chat-attachment-button');
        const chatImagePreviewContainer = document.getElementById('chat-image-preview-container');
        const chatImagePreview = document.getElementById('chat-image-preview');
        const chatClearImageButton = document.getElementById('chat-clear-image-button');
        const micButton = document.getElementById('mic-button');


        const llmModal = document.getElementById('llm-modal');
        const llmModalCloseButton = document.querySelector('.llm-modal-close-button');
        const llmModalTitle = document.getElementById('llm-modal-title');
        const llmModalInputArea = document.getElementById('llm-modal-input-area');
        const llmModalTextarea = document.getElementById('llm-modal-textarea');
        const llmModalSubmitButton = document.getElementById('llm-modal-submit-button');
        const llmModalResponseArea = document.getElementById('llm-modal-response-area');
        const llmModalResponseText = document.getElementById('llm-modal-response-text');
        const llmModalLoading = document.getElementById('llm-modal-loading');
        const llmModalAttachmentButton = document.getElementById('llm-modal-attachment-button');
        const llmModalImagePreviewContainer = document.getElementById('llm-modal-image-preview-container');
        const llmModalImagePreview = document.getElementById('llm-modal-image-preview');
        const llmModalClearImageButton = document.getElementById('llm-modal-clear-image-button');


        const messageBox = document.getElementById('message-box');
        const messageBoxText = document.getElementById('message-box-text');
        const messageBoxCloseButton = document.getElementById('message-box-close-button');

        const imageUploadChoiceModal = document.getElementById('image-upload-choice-modal');
        const takePhotoButton = document.getElementById('take-photo-button');
        const chooseFromDeviceButton = document.getElementById('choose-from-device-button');
        const imageUploadChoiceCancelButton = document.getElementById('image-upload-choice-cancel-button');
        const imageUploadCamera = document.getElementById('image-upload-camera');
        const imageUploadFile = document.getElementById('image-upload-file');

        let historyStack = []; // Стек для управления историей навигации
        let isMusicPlaying = false; // Флаг состояния воспроизведения музыки
        let musicTracks = [
    "https://www.dropbox.com/scl/fi/icayg59q33c70gb2cg75p/SPOTDOWNLOADER.COM-a-way-out.mp3?rlkey=a0df8zg6xwie9jxz2p875ytne&st=fxkygrna&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/p0ncr95pxclifvra306j2/SPOTDOWNLOADER.COM-Abandoned.mp3?rlkey=ifhviddy3w8bbkhicxt24rucs&st=rfxdlkwo&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/1k3ydqqi9f3syia1av12s/SPOTDOWNLOADER.COM-After-The-Rain.mp3?rlkey=bcq4d425qonu9uz7bvwql4d62&st=k8ibswuv&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/45y1yaa4t3iyi8wy8nwxi/SPOTDOWNLOADER.COM-An-Unknown-Journey.mp3?rlkey=600zz5f5nh0ll4tuaajkp7iyf&st=spd25c4w&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/p78idl0krzpfc2m4rw9n3/SPOTDOWNLOADER.COM-Aria-Math.mp3?rlkey=6iah99u7fb4ha7k3u8tqzy61i&st=7xmi4hm5&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/fv58qy9hd6qvmozjkyd0n/SPOTDOWNLOADER.COM-Arrival.mp3?rlkey=xnojsbkp780vm7rvdq69of914&st=c9zk07fv&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/3gs3jtt2mdxympd3wgem2/SPOTDOWNLOADER.COM-Autumn-Breeze.mp3?rlkey=omhhdljqzopts782fx56vjsdb&st=41rct6vk&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/bp4ct5tf6gdqfz4m24ne7/SPOTDOWNLOADER.COM-Autumn-Camp.mp3?rlkey=uv04jp1eyxvduofidjt1ndcy2&st=isaz27lg&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/ikk2rhnoilggftzkfa7dp/SPOTDOWNLOADER.COM-Best-Friend.mp3?rlkey=c3ts67hzzo00v2m5ssfvojjmv&st=8ki286q9&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/y9ekt98p4tte89ttfj94g/SPOTDOWNLOADER.COM-Better-Days.mp3?rlkey=qilt3wmjnwx11xuijz93xdd9h&st=qwkk66si&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/nucjat8d79ounkbodfnca/SPOTDOWNLOADER.COM-Bliss.mp3?rlkey=7mr3p3k0svy99j9n2mauuujmf&st=zxny721o&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/484rwst06nmo9hrm87s8z/SPOTDOWNLOADER.COM-Blue-Moon.mp3?rlkey=q2dauftrhvqms73aowodkz7b0&st=2en8b0zo&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/kw3qrb85e5cy86r730i4g/SPOTDOWNLOADER.COM-Borderline.mp3?rlkey=edac86tdqm177791tsqcvxmf6&st=u35ug2p6&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/4qtlw12zxxy1tmiyiwhnd/SPOTDOWNLOADER.COM-Breathtaking.mp3?rlkey=kxg8v6dhw19gqhcbg4fje4o62&st=8idpv9x0&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/l2i7y3kwnkzvuq4lyvk1t/SPOTDOWNLOADER.COM-Cail-n.mp3?rlkey=srnwlj2ppear7mbogts0p9upg&st=ml0fx7hm&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/ndg8uhx1zccsc2n4gh441/SPOTDOWNLOADER.COM-Calming-1111-Hz.mp3?rlkey=4ffrradpv70wa9398n3v0e4xt&st=vk6enk8i&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/v2oyx4ov68n7vzl2igbyq/SPOTDOWNLOADER.COM-Clouds.mp3?rlkey=db5c6hibcr6riedgxddiqkph2&st=vko5es3z&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/lzecvv6bdznkg0v3pjdgb/SPOTDOWNLOADER.COM-cool-winds.mp3?rlkey=8jvenaf064z9d3kqd3zfllryl&st=setiwdxo&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/xc96emtxj456hazuf0ycc/SPOTDOWNLOADER.COM-Cruelty.mp3?rlkey=d15zwmch040h0iilshv57n6xx&st=4bbl67g2&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/3mw6ye11fu68b5rao7qqs/SPOTDOWNLOADER.COM-Cycles.mp3?rlkey=uvojoxv80povzf3db08bb81b9&st=lugulnaj&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/5x03xbitv1532iuv57kk7/SPOTDOWNLOADER.COM-Days-Past.mp3?rlkey=qbh2v9mbfgvevspq6axk5p4g0&st=bvymfm4d&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/l3onijgdex87jyt6ihjpq/SPOTDOWNLOADER.COM-Distant-Shimmers.mp3?rlkey=wh8u0arzi93njkeg9rme40mkb&st=t0943te3&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/np8qm4qqphlzja6fhjps9/SPOTDOWNLOADER.COM-Dozing.mp3?rlkey=jwogvxgyju0unm11sdpifgerv&st=u987jj3u&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/313ee898s07w3stknynez/SPOTDOWNLOADER.COM-Dragonwalker.mp3?rlkey=3g3v9pjbaah67fp7lqmxqseh2&st=41cm2y7g&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/l3onijgdex87jyt6ihjpq/SPOTDOWNLOADER.COM-Distant-Shimmers.mp3?rlkey=wh8u0arzi93njkeg9rme40mkb&st=rqfy1cwd&dl=0&raw=1",
    "https://www.dropbox.com/scl/fi/0c2zjwn955h676z7zgmlu/SPOTDOWNLOADER.COM-Down-by-the-Lake.mp3?rlkey=mrnnpyje2in9167nev4am8og6&st=cqmixh7o&dl=0&raw=1"
];
        let currentTrackIndex = 0; // Индекс текущего трека
        let pomodoroTimerInterval; // Идентификатор интервала для таймера Pomodoro
        let pomodoroTimeLeft = 25 * 60; // Оставшееся время для таймера Pomodoro (25 минут в секундах)
        let isPomodoroRunning = false; // Флаг состояния таймера Pomodoro
        const pomodoroSound = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3'); // Звук для завершения Pomodoro (заглушка)

        let currentImageBase64 = null; // Хранит данные изображения в формате Base64 для отправки в AI
        let currentImageTarget = null; // Указывает, какой предварительный просмотр изображения обновлять (чат или модальное окно)

        let chatHistory = []; // Хранит историю разговоров для чата AI
        let recognition; // Объект SpeechRecognition (распознавание речи)
        let isRecognizing = false; // Флаг состояния распознавания речи
        let synth = window.speechSynthesis; // Объект SpeechSynthesis (синтез речи)
        let isSpeaking = false; // Флаг состояния синтеза речи

        // --- Вспомогательные функции ---

        /**
         * Отображает пользовательское окно сообщений.
         * @param {string} message - Сообщение для отображения.
         */
        function showMessageBox(message) {
            messageBoxText.textContent = message;
            messageBox.classList.remove('hidden');
        }

        /**
         * Скрывает пользовательское окно сообщений.
         */
        function hideMessageBox() {
            messageBox.classList.add('hidden');
        }

        /**
         * Отображает модальное окно взаимодействия с LLM.
         * @param {string} title - Заголовок модального окна.
         * @param {boolean} showInput - Показывать ли поле ввода текста и кнопку отправки.
         * @param {string} placeholder - Текст-заглушка для поля ввода.
         * @param {string} initialPrompt - Начальный запрос для отправки AI, если ввод не требуется.
         * @param {string} aiPersona - Опционально: определяет персону AI для запроса (например, "Как финансовый консультант").
         */
        function showLlmModal(title, showInput, placeholder = '', initialPrompt = '', aiPersona = '') {
            llmModalTitle.textContent = title;
            llmModalTextarea.value = ''; // Очистка предыдущего ввода
            llmModalResponseText.innerHTML = ''; // Очистка предыдущего ответа, используется innerHTML для markdown
            llmModalSubmitButton.dataset.aiPersona = aiPersona; // Сохранение персоны для обработчика отправки
            llmModalSubmitButton.dataset.initialPrompt = initialPrompt; // Сохранение начального запроса для обработчика отправки
            currentImageBase64 = null; // Очистка предыдущего изображения
            llmModalImagePreviewContainer.classList.add('hidden'); // Скрытие предварительного просмотра изображения

            if (showInput) {
                llmModalInputArea.classList.remove('hidden');
                llmModalTextarea.placeholder = placeholder;
                llmModalResponseArea.classList.add('hidden'); // Скрытие области ответа изначально
            } else {
                llmModalInputArea.classList.add('hidden');
                llmModalResponseArea.classList.remove('hidden'); // Отображение области ответа для прямого вывода
                // Если ввод не требуется, отправляем начальный запрос напрямую
                if (initialPrompt) {
                    const fullPrompt = aiPersona ? `${aiPersona}, ${initialPrompt}` : initialPrompt;
                    // Для модального окна история пуста, а currentParts содержат начальный запрос
                    // Используем пустой массив для истории, так как это отдельное взаимодействие
                    callGeminiAPI([], [{ text: fullPrompt }], llmModalResponseText, llmModalLoading);
                }
            }
            llmModalLoading.classList.add('hidden'); // Скрытие индикатора загрузки
            llmModal.classList.remove('hidden');
        }

        /**
         * Скрывает модальное окно взаимодействия с LLM.
         */
        function hideLlmModal() {
            llmModal.classList.add('hidden');
            currentImageBase64 = null; // Очистка изображения при закрытии модального окна
            llmModalImagePreviewContainer.classList.add('hidden');
            llmModalImagePreview.src = '';
        }

        /**
         * Добавляет сообщение в чат.
         * @param {string} message - Текст сообщения.
         * @param {string} sender - 'user' (пользователь) или 'ai' (AI).
         * @param {string} [imageData] - Опционально: данные изображения в Base64 для отображения.
         */
        function addChatMessage(message, sender, imageData = null) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chat-message', sender);

            if (imageData) {
                const img = document.createElement('img');
                img.src = imageData;
                img.classList.add('chat-message-image');
                img.style.maxWidth = '100%';
                img.style.maxHeight = '150px';
                img.style.borderRadius = '10px';
                img.style.marginBottom = '5px';
                messageDiv.appendChild(img);
            }

            const textNode = document.createElement('p');
            textNode.textContent = message;
            messageDiv.appendChild(textNode);

            if (sender === 'ai') {
                const readAloudButton = document.createElement('button');
                readAloudButton.classList.add('read-aloud-button');
                readAloudButton.innerHTML = '<i class="fas fa-volume-up"></i>';
                readAloudButton.title = 'Прочитать вслух';
                readAloudButton.addEventListener('click', () => speakText(message));
                messageDiv.appendChild(readAloudButton);
            }

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Прокрутка до конца
        }

        /**
         * Отправляет сообщение AI и отображает ответ.
         * Использует Gemini API.
         * @param {Array} currentHistory - Текущая история разговора для отправки в API.
         * @param {Array} currentParts - Части (текст/изображение) для текущего хода пользователя.
         * @param {HTMLElement} responseTarget - Элемент для отображения ответа AI.
         * @param {HTMLElement} loadingTarget - Элемент индикатора загрузки.
         * @param {function} [callback] - Опциональная функция обратного вызова для выполнения после получения ответа.
         */
        async function callGeminiAPI(currentHistory, currentParts, responseTarget, loadingTarget, callback = null) {
            loadingTarget.classList.remove('hidden');
            // Если responseTarget является тегом P, очищаем его текст. Если это DIV, очищаем его дочерние элементы.
            if (responseTarget.tagName === 'P') {
                responseTarget.textContent = '';
            } else {
                responseTarget.innerHTML = ''; // Очистка содержимого для сообщений чата
            }

            try {
                // API-ключ предоставляется средой Canvas во время выполнения.
                // Он доступен через глобальную переменную __api_key.
                const apiKey = "AIzaSyAtvRugpT2G_2YicBG2g_CuFfVIwKqyXbc"; // Если вы хотите использовать модели, отличные от gemini-2.0-flash или imagen-3.0-generate-002, укажите здесь ключ API. В противном случае оставьте как есть.

                if (!apiKey) {
                    showMessageBox("API ключ не установлен. Пожалуйста, убедитесь, что ваш API ключ доступен в среде.");
                    loadingTarget.classList.add('hidden');
                    return;
                }

                // Объединяем историю и текущие части пользователя для отправки
                const payload = { contents: [...currentHistory, { role: "user", parts: currentParts }] };
                // Использование gemini-1.5-flash
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                loadingTarget.classList.add('hidden'); // Удаление индикатора загрузки

                if (response.ok) { // Проверка на успешный HTTP-статус (2xx)
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiContent = result.candidates[0].content;
                        const text = aiContent.parts[0].text;

                        if (responseTarget.tagName === 'P') {
                            // Для ответа модального окна LLM, разрешить рендеринг Markdown
                            responseTarget.innerHTML = marked.parse(text); // Использование marked.js для Markdown
                        } else { // Для сообщений чата
                            addChatMessage(text, 'ai');
                            // Добавление ответа AI в основную историю чата
                            chatHistory.push(aiContent);
                        }
                        if (callback) callback(text);
                    } else {
                        showMessageBox("Извините, не удалось получить ответ от AI.");
                        console.error("Неожиданная структура ответа AI:", result);
                    }
                } else {
                    const errorMessage = `Ошибка API AI: ${result.error ? result.error.message : JSON.stringify(result)}`;
                    showMessageBox(errorMessage);
                    console.error(errorMessage);
                }
            } catch (error) {
                loadingTarget.classList.add('hidden'); // Удаление индикатора загрузки
                const errorMessage = `Произошла ошибка при общении с AI: ${error.message}`;
                showMessageBox(errorMessage);
                console.error(errorMessage);
            }
        }

        /**
         * Отправляет сообщение в основной чат AI и отображает ответ.
         */
        async function sendAIChatMessage() {
            const prompt = chatInput.value.trim();
            const imageToSend = currentImageBase64;

            if (!prompt && !imageToSend) return; // Не отправлять пустые сообщения

            const userParts = [];
            if (prompt) {
                userParts.push({ text: prompt });
            }
            if (imageToSend) {
                userParts.push({
                    inlineData: {
                        mimeType: imageToSend.split(',')[0].split(':')[1].split(';')[0],
                        data: imageToSend.split(',')[1]
                    }
                });
            }

            // Добавление сообщения пользователя в историю чата и его отображение
            chatHistory.push({ role: "user", parts: userParts });
            addChatMessage(prompt, 'user', imageToSend); // Отображение сообщения пользователя с изображением

            chatInput.value = '';
            clearImagePreview(chatImagePreview, chatImagePreviewContainer);

            const loadingIndicator = document.createElement('span');
            loadingIndicator.classList.add('loading-indicator');
            chatMessages.appendChild(loadingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Вызов API с полной историей чата
            await callGeminiAPI(chatHistory, userParts, chatMessages, loadingIndicator);
        }

        /**
         * Обновляет видимость кнопки "Назад".
         */
        function updateNavigationButtons() {
            if (historyStack.length > 1) {
                backButton.classList.remove('hidden');
            } else {
                backButton.classList.add('hidden');
            }
        }

        /**
         * Переходит на указанную страницу по ID.
         * @param {string} pageId - ID страницы для отображения.
         * @param {boolean} pushToHistory - Добавлять ли страницу в историю (true для перехода вперед).
         */
        function showPage(pageId, pushToHistory = true) {
            // Сначала скрываем все страницы
            const pages = appContainer.querySelectorAll('.page');
            pages.forEach(page => page.remove()); // Удаляем существующие страницы

            // Добавляем в историю, если не возвращаемся назад
            if (pushToHistory) {
                historyStack.push(pageId);
            } else {
                // Если извлекаем из истории, убеждаемся, что текущая страница удалена перед добавлением новой
                if (historyStack[historyStack.length - 1] !== pageId) {
                    historyStack.pop(); // Удаляем текущую страницу из истории
                }
            }
            updateNavigationButtons();

            // Рендеринг запрошенной страницы
            let pageContent = '';
            let pageTitle = '';

            // Определение содержимого для подстраниц навыков
            const skillContents = {
                // Финансовые и интеллектуальные навыки
                'skills-finance-10k': {
                    title: 'Накопить 10,000',
                    info: '<p>Накопление 10,000 рублей — отличная первая цель. Начните с анализа своих доходов и расходов, чтобы понять, сколько вы можете откладывать ежемесячно. Постарайтесь сократить необязательные траты и рассмотрите возможность дополнительного заработка.</p>',
                    aiPrompt: 'Как финансовый консультант, дай пошаговый план, как накопить 10,000 рублей. Включи ссылки на полезные ресурсы и места для практики. обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-finance-20k': {
                    title: 'Накопить 20,000',
                    info: '<p>Для накопления 20,000 рублей важно продолжать отслеживать бюджет и искать способы увеличения сбережений. Возможно, стоит рассмотреть более агрессивные методы сокращения расходов или увеличить доход.</p>',
                    aiPrompt: 'Как финансовый консультант, дай советы по накоплению 20,000 рублей. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-finance-40k': {
                    title: 'Накопить 40,000',
                    info: '<p>Достижение 40,000 рублей требует дисциплины. Пересмотрите свои финансовые привычки, возможно, найдите новые источники дохода или оптимизируйте крупные расходы. Подумайте о краткосрочных инвестициях, если это безопасно.</p>',
                    aiPrompt: 'Как финансовый консультант, дай стратегию для накопления 40,000 рублей. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-finance-60k': {
                    title: 'Накопить 60,000',
                    info: '<p>Накопление 60,000 рублей — значительная цель. Это может потребовать более серьезного подхода к бюджету и поиску возможностей для роста капитала. Рассмотрите создание автоматических переводов на сберегательный счет.</p>',
                    aiPrompt: 'Как финансовый консультант, дай подробный план по накоплению 60,000 рублей. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-finance-80k': {
                    title: 'Накопить 80,000',
                    info: '<p>Для 80,000 рублей необходимо не только экономить, но и думать о приумножении. Изучите основы инвестирования, если еще не сделали этого. Продолжайте строго контролировать расходы и искать новые источники дохода.</p>',
                    aiPrompt: 'Как финансовый консультант, дай рекомендации по накоплению 80,000 рублей. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-finance-100k': {
                    title: 'Накопить 100,000',
                    info: '<p>Достижение 100,000 рублей — это серьезное финансовое достижение. На этом этапе важно не только продолжать сберегать, но и активно управлять своими финансами, возможно, с помощью профессионалов или более сложных инвестиционных стратегий.</p>',
                    aiPrompt: 'Как финансовый консультант, дай комплексную стратегию по накоплению 100,000 рублей. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-books-1': {
                    title: 'Прочесть 1 книгу',
                    info: '<p>Начните с выбора книги, которая вам действительно интересна. Установите реалистичную цель по количеству страниц в день и придерживайтесь её. Чтение по 15-30 минут в день уже даст результат.</p>',
                    aiPrompt: 'Как эксперт по чтению, дай советы, как прочесть 1 книгу, если нет привычки читать. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-books-2': {
                    title: 'Прочесть 2 книги',
                    info: '<p>Для двух книг в месяц увеличьте время чтения или количество страниц. Попробуйте читать в разное время дня, например, утром и вечером. Выбирайте книги, которые легко читаются и увлекают.</p>',
                    aiPrompt: 'Как эксперт по чтению, дай план, как прочесть 2 книги за месяц. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-books-4': {
                    title: 'Прочесть 4 книги',
                    info: '<p>Четыре книги в месяц — это уже серьезный темп. Используйте метод Pomodoro для чтения, делайте заметки, чтобы лучше усваивать информацию. Попробуйте аудиокниги для моментов, когда нет возможности читать.</p>',
                    aiPrompt: 'Как эксперт по чтению, дай эффективные методы для чтения 4 книг в месяц. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-books-8': {
                    title: 'Прочесть 8 книг',
                    info: '<p>Восемь книг в месяц — это высокий уровень. Возможно, стоит сосредоточиться на более коротких книгах или использовать техники скорочтения. Важно не только количество, но и качество усвоения информации.</p>',
                    aiPrompt: 'Как эксперт по чтению, дай продвинутые стратегии для чтения 8 книг в месяц. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-books-10': {
                    title: 'Прочесть 10 книг',
                    info: '<p>Для десяти книг в месяц необходимо максимально оптимизировать процесс чтения. Используйте все доступные ресурсы: электронные книги, аудиокниги, короткие перерывы для чтения. Погрузитесь в процесс.</p>',
                    aiPrompt: 'Как эксперт по чтению, дай советы по чтению 10 книг в месяц. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-books-12': {
                    title: 'Прочесть 12 книг',
                    info: '<p>Двенадцать книг в месяц — это по две книги в неделю. Это требует серьезной отдачи и оптимизации времени. Возможно, стоит рассмотреть чтение нескольких книг одновременно или фокусироваться на конкретных жанрах.</p>',
                    aiPrompt: 'Как эксперт по чтению, дай советы по чтению 12 книг в месяц. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь'
                },
                'skills-english-a1': {
                    title: 'Английский A1',
                    info: '<p>Уровень A1 — это основы. Начните с изучения алфавита, простых фраз, базовой грамматики и словарного запаса. Используйте приложения для изучения языков и смотрите детские мультфильмы на английском.</p>',
                    aiPrompt: 'Как преподаватель английского, дай план для достижения уровня A1. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения и сылку на ютуб канал https://www.youtube.com/@englishplaylists и другие полезные каналы '
                },
                'skills-english-a2': {
                    title: 'Английский A2',
                    info: '<p>На уровне A2 вы уже можете понимать простые предложения и участвовать в базовых диалогах. Сосредоточьтесь на расширении словарного запаса, улучшении произношения и понимании простых текстов.</p>',
                    aiPrompt: 'Как преподаватель английского, дай план для достижения уровня A2. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения и сылку на ютуб канал https://www.youtube.com/@englishplaylists и другие полезные каналы '
                },
                'skills-english-b1': {
                    title: 'Английский B1',
                    info: '<p>B1 — это средний уровень. Вы можете общаться на повседневные темы, понимать основную идею сложных текстов. Практикуйте разговорную речь, читайте адаптированные книги и смотрите сериалы с субтитрами.</p>',
                    aiPrompt: 'Как преподаватель английского, дай план для достижения уровня B1. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения и сылку на ютуб канал https://www.youtube.com/@englishplaylists и другие полезные каналы '
                },
                'skills-english-b2': {
                    title: 'Английский B2',
                    info: '<p>B2 — это уверенный средний уровень. Вы можете свободно общаться, понимать сложные тексты и участвовать в дискуссиях. Сосредоточьтесь на нюансах грамматики, идиомах и расширении академического словарного запаса.</p>',
                    aiPrompt: 'Как преподаватель английского, дай план для достижения уровня B2. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения и сылку на ютуб канал https://www.youtube.com/@englishplaylists и другие полезные каналы '
                },
                'skills-english-c1': {
                    title: 'Английский C1',
                    info: '<p>C1 — продвинутый уровень. Вы можете свободно и спонтанно выражать свои мысли, понимать сложные тексты. Практикуйте академическое письмо, участвуйте в дебатах и читайте оригинальную литературу.</p>',
                    aiPrompt: 'Как преподаватель английского, дай план для достижения уровня C1. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения и сылку на ютуб канал https://www.youtube.com/@englishplaylists и другие полезные каналы '
                },
                'skills-english-c2': {
                    title: 'Английский C2',
                    info: '<p>C2 — уровень владения в совершенстве, близкий к носителю языка. Вы можете понимать практически всё, что слышите и читаете. Поддерживайте свой уровень, постоянно практикуясь и погружаясь в языковую среду.</p>',
                    aiPrompt: 'Как преподаватель английского, дай план для достижения уровня C2. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения и сылку на ютуб канал https://www.youtube.com/@englishplaylists и другие полезные каналы '
                },
                'skills-sign-language': {
                    title: 'Выучить язык жестов',
                    info: '<p>Изучение языка жестов открывает новые возможности для общения. Начните с основ: алфавита, базовых слов и фраз. Используйте онлайн-ресурсы, видеоуроки и, по возможности, общайтесь с носителями языка.</p>',
                    aiPrompt: 'Как эксперт по языку жестов, дай пошаговый план, как выучить язык жестов. Включи ссылки на полезные ресурсы и места для практики.обязательно добавлять ссылки на бесплатные ресурсы которые могут помочь. и дай подробный план обучения '
                },
                // Навыки физического и ментального развития
                'skills-sport-1day': {
                    title: 'Спорт дома — день 1',
                    info: '<p>Начните с легкой разминки, затем выполните базовые упражнения: приседания, отжимания от пола (или от стены), планка. Завершите растяжкой. Главное — начать и сделать первый шаг!</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план тренировки дома на 1 день для начинающих. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-sport-5day': {
                    title: 'Спорт дома — день 5',
                    info: '<p>К пятому дню вы уже освоили основы. Увеличьте количество повторений или подходов, добавьте новые упражнения, например, выпады или скручивания. Помните о правильной технике.</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план тренировки дома на 5 дней для новичков. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-sport-10day': {
                    title: 'Спорт дома — день 10',
                    info: '<p>На десятый день можно усложнить тренировку: добавьте интервальные упражнения или используйте легкие утяжелители (бутылки с водой). Следите за питанием и режимом сна.</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план тренировки дома на 10 дней для среднего уровня. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-sport-15day': {
                    title: 'Спорт дома — день 15',
                    info: '<p>К пятнадцатому дню вы уже чувствуете себя сильнее. Попробуйте более сложные вариации упражнений или увеличьте длительность тренировки. Разнообразьте программу, чтобы не потерять мотивацию.</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план тренировки дома на 15 дней для продвинутых. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-sport-20day': {
                    title: 'Спорт дома — день 20',
                    info: '<p>На двадцатый день вы уже сформировали привычку. Возможно, стоит попробовать тренировки с собственным весом, такие как берпи или прыжки. Уделите внимание восстановлению и правильному питанию.</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план тренировки дома на 20 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-sport-30day': {
                    title: 'Спорт дома — день 30',
                    info: '<p>Месяц регулярных тренировок — это отличный результат! Теперь вы можете ставить более амбициозные цели, например, освоить новые элементы или улучшить выносливость. Продолжайте слушать свое тело.</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план тренировки дома на 30 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-meditation-1day': {
                    title: 'Медитация — день 1',
                    info: '<p>Начните с 5 минут. Сядьте удобно, закройте глаза и сосредоточьтесь на своем дыхании. Когда мысли отвлекают, мягко возвращайте внимание к дыханию. Не судите себя, просто наблюдайте.</p>',
                    aiPrompt: 'Как специалист по медитации, дай инструкцию для медитации на 1 день для начинающих. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-meditation-5day': {
                    title: 'Медитация — день 5',
                    info: '<p>К пятому дню вы уже привыкаете к процессу. Увеличьте время до 10-15 минут. Попробуйте сканирование тела, обращая внимание на ощущения в разных частях тела без оценки.</p>',
                    aiPrompt: 'Как специалист по медитации, дай план медитации на 5 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-meditation-10day': {
                    title: 'Медитация — день 10',
                    info: '<p>На десятый день вы можете заметить, как медитация влияет на ваше состояние. Попробуйте медитацию осознанности, фокусируясь на звуках, запахах или ощущениях вокруг вас.</p>',
                    aiPrompt: 'Как специалист по медитации, дай план медитации на 10 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-meditation-15day': {
                    title: 'Медитация — день 15',
                    info: '<p>К пятнадцатому дню медитация становится частью вашей рутины. Экспериментируйте с разными техниками или используйте управляемые медитации. Отмечайте изменения в своем настроении и концентрации.</p>',
                    aiPrompt: 'Как специалист по медитации, дай план медитации на 15 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-meditation-20day': {
                    title: 'Медитация — день 20',
                    info: '<p>На двадцатый день вы углубляете свою практику. Возможно, вы захотите изучить более сложные концепции медитации или присоединиться к группе. Медитация становится источником спокойствия и ясности.</p>',
                    aiPrompt: 'Как специалист по медитации, дай план медитации на 20 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-meditation-30day': {
                    title: 'Медитация — день 30',
                    info: '<p>Месяц регулярной медитации — это значительное достижение! Вы развили устойчивую практику и можете ощущать её благотворное влияние на свою жизнь. Продолжайте исследовать и углублять свои знания.</p>',
                    aiPrompt: 'Как специалист по медитации, дай план медитации на 30 дней. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения для тренировки дома , то есть давай название и сылку на скачивание'
                },
                'skills-habits-0day': {
                    title: '100 дней без (вредных привычек) — 0',
                    info: '<p>Сегодня — день ноль! Определите одну вредную привычку, от которой вы хотите избавиться. Запишите, почему это важно для вас. Подготовьтесь к вызовам и найдите замену привычке.</p>',
                    aiPrompt: 'Как коуч по привычкам, дай советы, как начать 100 дней без вредных привычек. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения  , то есть давай название и сылку на скачивание'
                },
                'skills-habits-10day': {
                    title: '100 дней без (вредных привычек) — 10',
                    info: '<p>Десять дней — это уже прогресс! Отмечайте свои успехи. Если были срывы, не отчаивайтесь, просто начните заново. Продолжайте искать поддержку и напоминать себе о своей цели.</p>',
                    aiPrompt: 'Как коуч по привычкам, дай советы, как продержаться 10 дней без вредных привычек. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения  , то есть давай название и сылку на скачивание'
                },
                'skills-habits-40day': {
                    title: '100 дней без (вредных привычек) — 40',
                    info: '<p>Сорок дней — это впечатляющий результат! Привычка уже ослабевает. Продолжайте укреплять свою решимость, избегайте триггеров и отмечайте, как улучшается ваша жизнь без этой привычки.</p>',
                    aiPrompt: 'Как коуч по привычкам, дай советы, как продержаться 40 дней без вредных привычек. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения  , то есть давай название и сылку на скачивание'
                },
                'skills-habits-100day': {
                    title: '100 дней без (вредных привычек) — 100',
                    info: '<p>Поздравляем! Вы достигли 100 дней без вредной привычки! Это огромное достижение, демонстрирующее вашу силу воли и самодисциплину. Теперь вы можете закрепить этот результат и, возможно, взяться за следующую цель.</p>',
                    aiPrompt: 'Как коуч по привычкам, дай советы, как закрепить результат 100 дней без вредных привычек и двигаться дальше. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения , то есть давай название и сылку на скачивание'
                },
                'skills-sugar-1day': {
                    title: 'Сахар — 1 день',
                    info: '<p>Один день без сахара — это начало! Избегайте всех продуктов с добавленным сахаром. Сосредоточьтесь на свежих фруктах, овощах и цельных продуктах. Пейте больше воды.</p>',
                    aiPrompt: 'Как диетолог, дай советы, как продержаться 1 день без сахара. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения  , то есть давай название и сылку на скачивание'
                },
                'skills-sugar-5day': {
                    title: 'Сахар — 5 дней',
                    info: '<p>К пятому дню вы можете почувствовать снижение тяги. Продолжайте читать этикетки продуктов. Найдите здоровые альтернативы сладкому, например, ягоды или орехи.</p>',
                    aiPrompt: 'Как диетолог, дай советы, как продержаться 5 дней без сахара. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения , то есть давай название и сылку на скачивание'
                },
                'skills-sugar-10day': {
                    title: 'Сахар — 10 дней',
                    info: '<p>На десятый день ваш организм начинает перестраиваться. Вы можете заметить улучшение энергии и настроения. Продолжайте экспериментировать с новыми рецептами без сахара.</p>',
                    aiPrompt: 'Как диетолог, дай советы, как продержаться 10 дней без сахара. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения, то есть давай название и сылку на скачивание'
                },
                'skills-sugar-15day': {
                    title: 'Сахар — 15 дней',
                    info: '<p>К пятнадцатому дню вы уже привыкаете к новому рациону. Тяга к сладкому значительно уменьшится. Сосредоточьтесь на разнообразии питания и получении всех необходимых питательных веществ.</p>',
                    aiPrompt: 'Как диетолог, дай советы, как продержаться 15 дней без сахара. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения , то есть давай название и сылку на скачивание'
                },
                'skills-sugar-20day': {
                    title: 'Сахар — 20 дней',
                    info: '<p>На двадцатый день вы уже эксперт в отказе от сахара! Продолжайте делиться своим опытом и вдохновлять других. Поддерживайте свой прогресс, делая осознанный выбор в питании.</p>',
                    aiPrompt: 'Как диетолог, дай советы, как продержаться 20 дней без сахара. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения , то есть давай название и сылку на скачивание'
                },
                'skills-sugar-30day': {
                    title: 'Сахар — 30 дней',
                    info: '<p>Месяц без сахара — это невероятное достижение! Вы полностью изменили свои пищевые привычки и улучшили свое здоровье. Продолжайте наслаждаться натуральными вкусами и поддерживать здоровый образ жизни.</p>',
                    aiPrompt: 'Как диетолог, дай советы, как продержаться 30 дней без сахара и поддерживать результат. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения , то есть давай название и сылку на скачивание'
                },
                'skills-healthy-eating': {
                    title: 'Правильное питание',
                    info: '<p>Правильное питание — это основа здоровья. Сосредоточьтесь на цельных, необработанных продуктах: овощах, фруктах, нежирном белке, цельнозерновых. Избегайте фастфуда и полуфабрикатов.</p>',
                    aiPrompt: 'Как диетолог, дай основные принципы правильного питания для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'skills-better-sleep': {
                    title: 'Лучше спать',
                    info: '<p>Качественный сон критически важен. Установите регулярный график сна, создайте расслабляющую рутину перед сном, избегайте кофеина и тяжелой пищи вечером. Обеспечьте темную и тихую спальню.</p>',
                    aiPrompt: 'Как сомнолог, дай советы, как улучшить качество сна. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения , то есть давай название и сылку на скачивание'
                },
                'skills-fat-percent': {
                    title: 'Нормализовать % жира',
                    info: '<p>Нормализация процента жира в организме требует комплексного подхода: сбалансированное питание (дефицит калорий), регулярные физические нагрузки (кардио и силовые), достаточный сон и снижение стресса.</p>',
                    aiPrompt: 'Как фитнес-тренер, дай план по нормализации процента жира в организме. Включи ссылки на полезные ресурсы и места для практики.'
                },
                // Образовательные и творческие навыки
                'skills-wimhof': {
                    title: 'Техника Вим Хофа',
                    info: '<p>Техника Вим Хофа включает дыхательные упражнения, воздействие холодом и развитие сосредоточенности. Она направлена на улучшение физического и ментального здоровья, повышение иммунитета и энергии. Начните с изучения основ дыхания.</p>',
                    aiPrompt: 'Как инструктор по технике Вим Хофа, объясни основы техники и как ее практиковать. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'skills-notebook': {
                    title: 'Вести блокнот',
                    info: '<p>Ведение блокнота помогает структурировать мысли, планировать задачи и отслеживать прогресс. Вы можете использовать его для ведения дневника, записи идей, составления списков или обучения. Начните с ежедневных записей.</p>',
                    aiPrompt: 'Как эксперт по продуктивности, дай советы, как эффективно вести блокнот для саморазвития. Включи ссылки на полезные ресурсы и места для практики. И предлагай другие бесплатные приложения, то есть давай название и сылку на скачивание'
                },
                'skills-diction': {
                    title: 'Заниматься дикцией',
                    info: '<p>Хорошая дикция улучшает коммуникацию и уверенность в себе. Практикуйте скороговорки, делайте артикуляционные упражнения, читайте вслух. Записывайте себя, чтобы отслеживать прогресс.</p>',
                    aiPrompt: 'Как преподаватель ораторского искусства, дай упражнения для улучшения дикции. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'skills-3d-blender': {
                    title: '3D-блендер',
                    info: '<p>Blender — мощный инструмент для 3D-моделирования, анимации и рендеринга. Начните с изучения интерфейса и базовых операций: создание объектов, перемещение, масштабирование. Существует множество бесплатных уроков онлайн.</p>',
                    aiPrompt: 'Как 3D-художник, дай пошаговый план, как начать изучать 3D-блендер для новичков. Включи ссылки на полезные ресурсы и места для практики.И предлагай другие бесплатные приложения ютуб каналы и тд  , то есть давай название и сылку '
                },
                'skills-drawing': {
                    title: 'Научиться рисовать',
                    info: '<p>Рисование — это навык, который можно развить. Начните с основ: форм, перспективы, света и тени. Практикуйтесь ежедневно, даже по 15-20 минут. Используйте референсы и не бойтесь экспериментировать.</p>',
                    aiPrompt: 'Как художник, дай советы, как научиться рисовать с нуля. Включи ссылки на полезные ресурсы и места для практики.И предлагай другие бесплатные приложения ютуб каналы и тд  , то есть давай название и сылку '
                },
                'skills-timemanagement': {
                    title: 'Настроить тайм-менеджмент',
                    info: '<p>Эффективный тайм-менеджмент помогает достигать целей и снижать стресс. Используйте такие техники, как Pomodoro, матрица Эйзенхауэра, или просто составляйте списки дел. Определите свои приоритеты.</p>',
                    aiPrompt: 'Как эксперт по тайм-менеджменту, дай советы, как настроить эффективный тайм-менеджмент. Включи ссылки на полезные ресурсы и места для практики.И предлагай другие бесплатные приложения ютуб каналы и тд  , то есть давай название и сылку на приложение'
                },
                'skills-rubikscube': {
                    title: 'Сборка кубика Рубика',
                    info: '<p>Сборка кубика Рубика развивает логику и мелкую моторику. Начните с изучения метода для начинающих (послойная сборка). Запомните несколько алгоритмов и практикуйтесь регулярно. Есть много видеоуроков.</p>',
                    aiPrompt: 'Как спидкубер, дай пошаговую инструкцию, как собрать кубик Рубика для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'skills-math-logic': {
                    title: 'Учить математику / логические стили',
                    info: '<p>Развитие математических и логических навыков полезно в любой сфере. Решайте головоломки, изучайте основы логики, практикуйтесь в решении задач. Онлайн-курсы и учебники могут помочь.</p>',
                    aiPrompt: 'Как преподаватель математики, дай советы, как эффективно учить математику или развивать логическое мышление. Включи ссылки на полезные ресурсы и места для практики.И предлагай другие бесплатные приложения ютуб каналы и тд  , то есть давай название и сылку на приложение '
                }
            };

            const lessonContents = {
                // Языки
                'lesson-english': {
                    title: 'Английский язык',
                    info: '<p>Английский — это глобальный язык общения, открывающий двери к новым знаниям, путешествиям и карьерным возможностям. Начните с основ грамматики и словарного запаса, постепенно погружаясь в языковую среду.</p>',
                    resources: [
                        { name: 'English with Lucy', url: 'https://www.youtube.com/user/EnglishwithLucy', type: 'YouTube' },
                        { name: 'Duolingo', url: 'https://www.duolingo.com/', type: 'Курс' },
                        { name: 'BBC Learning English', url: 'https://www.bbc.co.uk/learningenglish/', type: 'Ресурс' },
                        { name: 'Quizlet (словарный тренажер)', url: 'https://quizlet.com/', type: 'Тренажер' }
                    ],
                    aiPrompt: 'Как преподаватель английского, дай советы по изучению английского языка для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-spanish': {
                    title: 'Испанский язык',
                    info: '<p>Испанский язык является одним из самых распространенных в мире. Его изучение поможет вам понять культуру Латинской Америки и Испании, а также расширить круг общения.</p>',
                    resources: [
                        { name: 'SpanishDict', url: 'https://www.youtube.com/user/SpanishDict', type: 'YouTube' },
                        { name: 'Busuu', url: 'https://www.busuu.com/', type: 'Курс' },
                        { name: 'Conjuguemos (грамматика)', url: 'https://conjuguemos.com/', type: 'Тренажер' }
                    ],
                    aiPrompt: 'Как преподаватель испанского, дай советы по изучению испанского языка. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-german': {
                    title: 'Немецкий язык',
                    info: '<p>Немецкий язык — ключ к культуре Германии, Австрии и Швейцарии, а также важный язык в науке и инженерии. Его изучение развивает логическое мышление.</p>',
                    resources: [
                        { name: 'Learn German with Anja', url: 'https://www.youtube.com/channel/UCZp_f9C6z_x8i_TzQj_7r4A', type: 'YouTube' },
                        { name: 'Deutsche Welle Learn German', url: 'https://www.dw.com/en/learn-german/s-2459', type: 'Ресурс' },
                        { name: 'Memrise', url: 'https://www.memrise.com/', type: 'Курс' }
                    ],
                    aiPrompt: 'Как преподаватель немецкого, дай советы по изучению немецкого языка. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-french': {
                    title: 'Французский язык',
                    info: '<p>Французский язык — язык искусства, моды, кулинарии и дипломатии. Его изучение открывает доступ к богатому культурному наследию.</p>',
                    resources: [
                        { name: 'Learn French With Alexa', url: 'https://www.youtube.com/user/learnfrenchwithalexa', type: 'YouTube' },
                        { name: 'Alliance Française', url: 'https://www.alliancefrancaise.org/', type: 'Курс' }
                    ],
                    aiPrompt: 'Как преподаватель французского, дай советы по изучению французского языка. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-chinese': {
                    title: 'Китайский язык',
                    info: '<p>Китайский (мандарин) — самый распространенный язык в мире. Его изучение поможет вам понять одну из древнейших культур и открыть новые возможности в бизнесе.</p>',
                    resources: [
                        { name: 'Yoyo Chinese', url: 'https://www.youtube.com/user/YoyoChinese', type: 'YouTube' },
                        { name: 'HSK Online', url: 'https://www.hskonline.com/', type: 'Курс' }
                    ],
                    aiPrompt: 'Как преподаватель китайского, дай советы по изучению китайского языка. Включи ссылки на полезные ресурсы и места для практики.'
                },
                // Науки
                'lesson-physics': {
                    title: 'Физика',
                    info: '<p>Физика — наука о природе, изучающая материю, энергию и их взаимодействие. Понимание физических законов помогает объяснить мир вокруг нас.</p>',
                    resources: [
                        { name: 'Veritasium', url: 'https://www.youtube.com/user/1veritasium', type: 'YouTube' },
                        { name: 'Khan Academy: Физика', url: 'https://www.khanacademy.org/science/physics', type: 'Курс' },
                        { name: 'PhET Interactive Simulations', url: 'https://phet.colorado.edu/', type: 'Тренажер' }
                    ],
                    aiPrompt: 'Как преподаватель физики, объясни основы физики для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-chemistry': {
                    title: 'Химия',
                    info: '<p>Химия изучает состав, свойства и превращения веществ. Это фундаментальная наука, лежащая в основе многих технологий и процессов в природе.</p>',
                    resources: [
                        { name: 'CrashCourse Chemistry', url: 'https://www.youtube.com/playlist?list=PL8dPuuaLjXtPHzzYuWy6fYEaX9mQQ8oGr', type: 'YouTube' },
                        { name: 'Khan Academy: Химия', url: 'https://www.khanacademy.org/science/chemistry', type: 'Курс' }
                    ],
                    aiPrompt: 'Как преподаватель химии, объясни основы химии для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-biology': {
                    title: 'Биология',
                    info: '<p>Биология — наука о жизни, изучающая живые организмы, их строение, функции, развитие и взаимодействие с окружающей средой.</p>',
                    resources: [
                        { name: 'Amoeba Sisters', url: 'https://www.youtube.com/user/AmoebaSisters', type: 'YouTube' },
                        { name: 'Khan Academy: Биология', url: 'https://www.khanacademy.org/science/biology', type: 'Курс' }
                    ],
                    aiPrompt: 'Как преподаватель биологии, объясни основы биологии для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-astronomy': {
                    title: 'Астрономия',
                    info: '<p>Астрономия — наука о Вселенной, изучающая небесные тела, их движение, строение, происхождение и эволюцию.</p>',
                    resources: [
                        { name: 'Kurzgesagt – In a Nutshell', url: 'https://www.youtube.com/user/Kurzgesagt', type: 'YouTube' },
                        { name: 'NASA Official', url: 'https://www.nasa.gov/', type: 'Ресурс' }
                    ],
                    aiPrompt: 'Как астроном, объясни основы астрономии для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                // Программирование
                'lesson-python': {
                    title: 'Программирование на Python',
                    info: '<p>Python — один из самых популярных языков программирования, используемый в веб-разработке, анализе данных, искусственном интеллекте и многих других областях. Он прост в освоении и очень гибок.</p>',
                    resources: [
                        { name: 'Codecademy', url: 'https://www.youtube.com/user/Codecademy', type: 'YouTube' },
                        { name: 'Codecademy: Python', url: 'https://www.codecademy.com/learn/learn-python-3', type: 'Курс' },
                        { name: 'LeetCode (задачи по программированию)', url: 'https://leetcode.com/', type: 'Тренажер' }
                    ],
                    aiPrompt: 'Как программист, дай пошаговый план изучения Python для новичков. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-javascript': {
                    title: 'Программирование на JavaScript',
                    info: '<p>JavaScript — основной язык для веб-разработки на стороне клиента, позволяющий создавать интерактивные и динамичные веб-страницы. Также используется на сервере (Node.js) и для мобильных приложений (React Native).</p>',
                    resources: [
                        { name: 'Traversy Media', url: 'https://www.youtube.com/user/TechGuyWeb', type: 'YouTube' },
                        { name: 'freeCodeCamp', url: 'https://www.freecodecamp.org/', type: 'Курс' },
                        { name: 'MDN Web Docs: JavaScript', url: 'https://developer.mozilla.org/ru/docs/Web/JavaScript', type: 'Ресурс' }
                    ],
                    aiPrompt: 'Как веб-разработчик, дай пошаговый план изучения JavaScript для новичков. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-webdev': {
                    title: 'Веб-разработка',
                    info: '<p>Веб-разработка — это процесс создания веб-сайтов и веб-приложений. Она включает в себя изучение HTML, CSS, JavaScript и серверных технологий.</p>',
                    resources: [
                        { name: 'The Net Ninja', url: 'https://www.youtube.com/channel/UCW5YeuTygf_bc-rz1Qhws0Q', type: 'YouTube' },
                        { name: 'Odin Project', url: 'https://www.theodinproject.com/', type: 'Курс' },
                        { name: 'W3Schools', url: 'https://www.w3schools.com/', type: 'Ресурс' }
                    ],
                    aiPrompt: 'Как эксперт по веб-разработке, дай план изучения веб-разработки с нуля. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-mobiledev': {
                    title: 'Мобильная разработка',
                    info: '<p>Мобильная разработка — это создание приложений для смартфонов и планшетов (iOS, Android). Можно использовать нативные языки (Swift/Kotlin) или кроссплатформенные фреймворки (React Native, Flutter).</p>',
                    resources: [
                        { name: 'Academind', url: 'https://www.youtube.com/c/Academind', type: 'YouTube' },
                        { name: 'Udemy (курсы по мобильной разработке)', url: 'https://www.udemy.com/courses/development/mobile-apps/', type: 'Курс' }
                    ],
                    aiPrompt: 'Как мобильный разработчик, дай план изучения мобильной разработки. Включи ссылки на полезные ресурсы и места для практики.'
                },
                // Искусство и дизайн
                'lesson-graphicdesign': {
                    title: 'Графический дизайн',
                    info: '<p>Графический дизайн — это искусство визуальной коммуникации, использующее изображения, типографику и пространство для передачи сообщений. Важен для брендинга, рекламы и веб-дизайна.</p>',
                    resources: [
                        { name: 'Satori Graphics', url: 'https://www.youtube.com/channel/UCsS_oW_b0XWd47t71Q0G_1w', type: 'YouTube' },
                        { name: 'Canva Design School', url: 'https://www.canva.com/learn/design-school/', type: 'Курс' },
                        { name: 'Adobe Creative Cloud (программы)', url: 'https://www.adobe.com/ru/creativecloud.html', type: 'Инструмент' }
                    ],
                    aiPrompt: 'Как графический дизайнер, дай советы по изучению графического дизайна для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-musictheory': {
                    title: 'Музыкальная теория',
                    info: '<p>Музыкальная теория — это изучение основ музыки, включая нотную грамоту, гармонию, ритм и форму. Помогает лучше понимать и создавать музыку.</p>',
                    resources: [
                        { name: '8-Bit Music Theory', url: 'https://www.youtube.com/channel/UCeZLO2VztxDKL3y84ttJ0gA', type: 'YouTube' },
                        { name: 'Teoria.com (интерактивные упражнения)', url: 'https://www.teoria.com/', type: 'Тренажер' }
                    ],
                    aiPrompt: 'Как преподаватель музыки, объясни основы музыкальной теории. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-photography': {
                    title: 'Фотография',
                    info: '<p>Фотография — это искусство создания изображений с помощью света. Изучение основ композиции, экспозиции и обработки поможет вам делать качественные и выразительные снимки.</p>',
                    resources: [
                        { name: 'Peter McKinnon', url: 'https://www.youtube.com/user/petermckinnon24', type: 'YouTube' },
                        { name: 'National Geographic Photography', url: 'https://www.nationalgeographic.com/photography/', type: 'Ресурс' }
                    ],
                    aiPrompt: 'Как фотограф, дай советы по изучению фотографии для начинающих. Включи ссылки на полезные ресурсы и места для практики.'
                },
                // Личностное развитие
                'lesson-publicspeaking': {
                    title: 'Публичные выступления',
                    info: '<p>Навык публичных выступлений помогает уверенно и убедительно доносить свои мысли до аудитории. Это важно для карьеры, образования и личной жизни.</p>',
                    resources: [
                        { name: 'TED', url: 'https://www.youtube.com/ted', type: 'YouTube' },
                        { name: 'Toastmasters International', url: 'https://www.toastmasters.org/', type: 'Клуб' }
                    ],
                    aiPrompt: 'Как тренер по публичным выступлениям, дай советы по улучшению навыков публичных выступлений. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-criticalthinking': {
                    title: 'Критическое мышление',
                    info: '<p>Критическое мышление — это способность анализировать информацию, выявлять предвзятость, оценивать аргументы и формировать обоснованные суждения. Важно для принятия решений и решения проблем.</p>',
                    resources: [
                        { name: 'School of Life', url: 'https://www.youtube.com/user/theschooloflife', type: 'YouTube' },
                        { name: 'Coursera: Critical Thinking Courses', url: 'https://www.coursera.org/courses?query=critical%20thinking', type: 'Курс' }
                    ],
                    aiPrompt: 'Как эксперт по критическому мышлению, дай советы по развитию критического мышления. Включи ссылки на полезные ресурсы и места для практики.'
                },
                'lesson-emotionalintelligence': {
                    title: 'Эмоциональный интеллект',
                    info: '<p>Эмоциональный интеллект — это способность понимать и управлять своими эмоциями, а также распознавать и влиять на эмоции других. Помогает строить крепкие отношения и успешно взаимодействовать в социуме.</p>',
                    aiPrompt: 'Как психолог, дай советы по развитию эмоционального интеллекта. Включи ссылки на полезные ресурсы и места для практики.'
                }
            };

            // Данные для фильмов (расширенный список)
            const moviesData = [
                {
                    title: 'Матрица',
                    kinopoiskId: '301', // Пример ID, замените на реальный
                    idea: 'Реальность может быть не тем, чем кажется. Фильм исследует вопросы свободы воли, выбора и природы реальности.',
                    teaches: 'Ставить под сомнение привычное, искать истину, бороться за свои убеждения.'
                },
                {
                    title: 'Бойцовский клуб',
                    kinopoiskId: '361',
                    idea: 'Критика потребительского общества и поиск идентичности в мире, где материальные блага доминируют.',
                    teaches: 'Переосмысливать ценности, противостоять конформизму, находить внутреннюю силу.'
                },
                {
                    title: 'Интерстеллар',
                    kinopoiskId: '258687',
                    idea: 'Исследование человеческого духа, любви, науки и пределов выживания в условиях космических путешествий.',
                    teaches: 'Ценить знания, стремиться к неизведанному, верить в себя и силу человеческих связей.'
                },
                {
                    title: 'Начало',
                    kinopoiskId: '447301',
                    idea: 'Сложная структура снов и реальности, кража и внедрение идей в подсознание. Фильм поднимает вопросы о природе сознания и памяти.',
                    teaches: 'Критически мыслить, различать реальность и иллюзии, понимать глубину человеческого подсознания.'
                },
                {
                    title: 'Форест Гамп',
                    kinopoiskId: '342',
                    idea: 'Жизнь как непредсказуемое путешествие, где простота, доброта и искренность могут привести к удивительным результатам. Фильм охватывает ключевые события американской истории.',
                    teaches: 'Ценить простые вещи, быть открытым к новому, верить в себя и преодолевать трудности с оптимизмом.'
                },
                {
                    title: 'Побег из Шоушенка',
                    kinopoiskId: '326',
                    idea: 'Надежда, упорство и сила духа в самых безнадежных условиях. Фильм показывает, как вера в себя и долгосрочное планирование могут привести к свободе.',
                    teaches: 'Никогда не сдаваться, сохранять надежду, даже когда все кажется потерянным, и что истинная свобода находится внутри.'
                },
                {
                    title: 'Зеленая миля',
                    kinopoiskId: '435',
                    idea: 'Справедливость, милосердие и человеческая жестокость. Фильм затрагивает темы предрассудков, сострадания и того, что истинное добро может быть найдено в самых неожиданных местах.',
                    teaches: 'Сопереживать, не судить по внешности, верить в добро и бороться с несправедливостью.'
                },
                {
                    title: 'Список Шиндлера',
                    kinopoiskId: '370',
                    idea: 'Героизм, моральный выбор и сохранение человечности во время Холокоста. Фильм основан на реальных событиях и показывает, как один человек может спасти тысячи жизней.',
                    teaches: 'Помнить уроки истории, ценить человеческую жизнь, проявлять мужество и сострадание в самые темные времена.'
                },
                {
                    title: '1+1 (Неприкасаемые)',
                    kinopoiskId: '535341',
                    idea: 'Дружба, преодоление социальных барьеров и принятие различий. Фильм, основанный на реальной истории, показывает, как необычная дружба может изменить жизни двух людей.',
                    teaches: 'Ценить настоящую дружбу, быть открытым к людям, несмотря на их происхождение или состояние, и находить радость в жизни.'
                },
                {
                    title: 'Тайная жизнь Уолтера Митти',
                    kinopoiskId: '571936',
                    idea: 'Поиск приключений, выход из зоны комфорта и обретение себя. Фильм вдохновляет на то, чтобы жить полной жизнью, не бояться рисковать и исследовать мир.',
                    teaches: 'Мечтать, но и действовать, чтобы воплотить мечты в реальность, находить красоту в обыденном и не упускать возможности.'
                },
                {
                    title: 'Общество мертвых поэтов',
                    kinopoiskId: '456',
                    idea: 'Важность индивидуальности, свободы мысли и стремления к своим мечтам, несмотря на общественные нормы. Фильм вдохновляет на творчество и самовыражение.',
                    teaches: 'Мыслить нестандартно, следовать своим увлечениям, находить свой голос и вдохновлять других.'
                },
                {
                    title: 'Престиж',
                    kinopoiskId: '8157',
                    idea: 'Соперничество, одержимость и жертвы, на которые идут люди ради искусства и признания. Фильм исследует природу иллюзии и обмана.',
                    teaches: 'Осторожность в стремлении к совершенству, цена успеха и важность этики.'
                },
                {
                    title: 'Вечное сияние чистого разума',
                    kinopoiskId: '500',
                    idea: 'Природа памяти, любви и отношений. Фильм задает вопросы о том, что происходит, когда люди пытаются стереть болезненные воспоминания.',
                    teaches: 'Ценить опыт, даже болезненный, и понимать, что воспоминания формируют нас.'
                },
                {
                    title: 'Достучаться до небес',
                    kinopoiskId: '328',
                    idea: 'Ценность жизни, дружбы и осуществления последних желаний перед лицом неизбежного. Фильм о двух смертельно больных друзьях, которые отправляются в последнее приключение.',
                    teaches: 'Жить полной жизнью, ценить каждый момент и не бояться идти за мечтой.'
                },
                {
                    title: 'Пианист',
                    kinopoiskId: '367',
                    idea: 'Выживание, сила искусства и человеческий дух в условиях войны и геноцида. Фильм основан на реальной истории польского пианиста во время Холокоста.',
                    teaches: 'Непоколебимость духа, важность культуры и искусства в самые темные времена.'
                },
                {
                    title: 'Леон',
                    kinopoiskId: '381',
                    idea: 'Отношения, одиночество и поиск смысла жизни в жестоком мире. Фильм о необычной дружбе профессионального киллера и маленькой девочки.',
                    teaches: 'Находить человечность в неожиданных местах, ценить связь с другими и бороться за справедливость.'
                },
                {
                    title: 'Звездные войны: Эпизод V – Империя наносит ответный удар',
                    kinopoiskId: '394',
                    idea: 'Борьба добра и зла, судьба, выбор и искупление. Культовый фильм, который углубляет мифологию "Звездных войн" и исследует темную сторону силы.',
                    teaches: 'Стоять на стороне добра, верить в свои силы и принимать сложные решения.'
                },
                {
                    title: 'Крестный отец',
                    kinopoiskId: '327',
                    idea: 'Семейные ценности, власть, мораль и последствия преступной жизни. Эпическая сага о сицилийской мафии в Америке.',
                    teaches: 'Последствия выбора, важность семьи и цена власти.'
                },
                {
                    title: 'Властелин колец: Возвращение короля',
                    kinopoiskId: '369',
                    idea: 'Героизм, дружба, жертвенность и борьба за свободу. Эпическое завершение трилогии о борьбе с темными силами.',
                    teaches: 'Стойкость, верность, важность командной работы и надежда в самые темные времена.'
                },
                {
                    title: 'На игле',
                    kinopoiskId: '343',
                    idea: 'Последствия наркомании, поиск себя и попытки вырваться из порочного круга. Культовый фильм о группе молодых наркоманов в Эдинбурге.',
                    teaches: 'Опасности зависимости, важность выбора и стремление к лучшей жизни.'
                }
                // Добавьте больше фильмов здесь по аналогии
                // {
                //     title: 'Название фильма',
                //     kinopoiskId: 'ID_фильма',
                //     idea: 'Идея фильма...',
                //     teaches: 'Чему учит фильм...'
                // },
                // ... до 100 фильмов
            ];

            if (skillContents[pageId]) {
                const content = skillContents[pageId];
                pageTitle = content.title;
                pageContent = `
                    <div class="page-section">
                        <h3>${content.title}</h3>
                        ${content.info}
                        <button class="llm-button" id="llm-skill-specific">✨Спросить AI</button>
                    </div>
                `;
                setTimeout(() => {
                    const llmSkillSpecificButton = document.getElementById('llm-skill-specific');
                    if (llmSkillSpecificButton) {
                        llmSkillSpecificButton.onclick = () => {
                            let aiPersona = '';
                            if (pageId.startsWith('skills-finance') || pageId.startsWith('skills-books') || pageId.startsWith('skills-english') || pageId.startsWith('skills-sign-language')) {
                                aiPersona = 'Как финансовый консультант и эксперт по обучению';
                            } else if (pageId.startsWith('skills-sport') || pageId.startsWith('skills-meditation') || pageId.startsWith('skills-habits') || pageId.startsWith('skills-sugar') || pageId.startsWith('skills-healthy-eating') || pageId.startsWith('skills-better-sleep') || pageId.startsWith('skills-fat-percent')) {
                                aiPersona = 'Как фитнес-тренер и специалист по ментальному здоровью';
                            } else if (pageId.startsWith('skills-wimhof') || pageId.startsWith('skills-notebook') || pageId.startsWith('skills-diction') || pageId.startsWith('skills-3d-blender') || pageId.startsWith('skills-drawing') || pageId.startsWith('skills-timemanagement') || pageId.startsWith('skills-rubikscube') || pageId.startsWith('skills-math-logic')) {
                                aiPersona = 'Как образовательный и творческий наставник';
                            }
                            showLlmModal(`AI-помощник: ${content.title}`, true, `Введите ваш вопрос о "${content.title}"..."`, content.aiPrompt, aiPersona);
                        };
                    }
                }, 0);
            } else if (lessonContents[pageId]) {
                const content = lessonContents[pageId];
                pageTitle = content.title;
                let resourcesHtml = '';
                if (content.resources && content.resources.length > 0) {
                    resourcesHtml = `
                        <h3>Ресурсы:</h3>
                        <ul>
                            ${content.resources.map(res => `<li><a href="${res.url}" target="_blank">${res.name} (${res.type})</a></li>`).join('')}
                        </ul>
                    `;
                }

                pageContent = `
                    <div class="page-section">
                        <h3>${content.title}</h3>
                        ${content.info}
                    </div>
                    <div class="page-section">
                        ${resourcesHtml}
                    </div>
                    <button class="llm-button" id="llm-lesson-specific">✨Спросить AI</button>
                `;
                setTimeout(() => {
                    const llmLessonSpecificButton = document.getElementById('llm-lesson-specific');
                    if (llmLessonSpecificButton) {
                        llmLessonSpecificButton.onclick = () => {
                            showLlmModal(`AI-помощник: ${content.title}`, true, `Введите ваш вопрос о "${content.title}"...`, content.aiPrompt);
                            llmModalSubmitButton.onclick = async () => {
                                const query = llmModalTextarea.value.trim();
                                if (query || currentImageBase64) {
                                    llmModalInputArea.classList.add('hidden');
                                    llmModalResponseArea.classList.remove('hidden');
                                    await callGeminiAPI(query, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                }
                            };
                        };
                    }
                }, 0);

            } else {
                switch (pageId) {
                    case 'home':
                        pageTitle = 'Путь Развития';
                        pageContent = `
                            <div class="button-grid">
                                <button class="main-button" data-page="sugar">САХАР</button>
                                <button class="main-button" data-page="skills">НАВЫКИ</button>
                                <button class="main-button" data-page="why-live">ЗАЧЕМ ЖИТЬ</button>
                                <button class="main-button" data-page="lofi">LO-FI</button>
                                <button class="main-button" data-page="books">КНИГИ</button>
                                <button class="main-button" data-page="lessons">УРОКИ</button>
                                <button class="main-button" data-page="movies">ФИЛЬМЫ</button>
                                <button class="main-button" data-page="pomodoro">МЕТОД ПОМИДОРА</button>
                                <button class="main-button" data-page="career-guidance">ПРОФОРИЕНТАЦИЯ</button>
                                <button class="main-button" data-page="motivation-goals">МОТИВАЦИЯ И ЦЕЛИ</button>
                                
                                <button class="main-button" data-page="github">Разработчик</button>
                            </div>
                        `;
                        break;
                    case 'anti-masturbation':
                        pageTitle = 'АНТИДРОЧ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Борьба с зависимостью</h3>
                                <p>Зависимость от мастурбации может негативно влиять на вашу жизнь, снижая мотивацию, социальную активность и общее благополучие. Важно осознать проблему и начать путь к выздоровлению.</p>
                                <p>Это не просто вопрос силы воли, а часто глубоко укоренившаяся привычка, требующая комплексного подхода и поддержки.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/4ElUAHWC2PY?si=dTVb9Oo9l1CKLmG5" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                                </div>
                            <div class="page-section">
                                <h3>Полезные ресурсы:</h3>
                                <ul>
                                    <li><a href="https://www.youtube.com/watch?v=your_video_id_1" target="_blank">Как бросить мастурбировать? (Видео)</a></li>
                                    <li><a href="https://www.youtube.com/watch?v=your_video_id_2" target="_blank">Почему нельзя мастурбировать (Видео)</a></li>
                                    <li><a href="https://www.nofap.com/" target="_blank">NoFap (Сайт сообщества)</a></li>
                                </ul>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/tU7ohQCm2-A?si=UnjscUzArVknre_j" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                              
  </div>
                            </div>
                            <button class="llm-button" id="llm-anti-masturbation-help">✨Спросить AI о помощи</button>
                            
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-anti-masturbation-help').onclick = () => {
                                showLlmModal('AI-помощник: Антидроч', true, 'Как бороться с зависимостью от мастубации?');
                            };
                        }, 0);
                        break;
                    case 'books':
                        pageTitle = 'КНИГИ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Полезные книги для развития:</h3>
                                <div class="button-grid">
                                    <a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" class="sub-button">ФЛИБУСТА (Пример PDF)</a>
                                    <a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" class="sub-button">BOOKBOON (Пример PDF)</a>
                                    <a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" class="sub-button">TWERPX (Пример PDF)</a>
                                    <a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" class="sub-button">QORJ (Пример PDF)</a>
                                </div>
                                <button class="llm-button" id="llm-book-summary">✨Узнать о книге</button>
                                <button class="llm-button" id="llm-book-suggest">✨Посоветовать книгу</button>
                                <button class="llm-button" id="llm-reading-plan">✨Создать план чтения</button>
                            </div>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-book-summary').onclick = () => {
                                showLlmModal('Узнать о книге', true, 'Введите название книги для получения краткого обзора...');
                            };
                            document.getElementById('llm-book-suggest').onclick = () => {
                                showLlmModal('Посоветовать книгу', true, 'Расскажите о ваших интересах (например, фантастика, саморазвитие, история)...');
                            };
                            document.getElementById('llm-reading-plan').onclick = () => {
                                showLlmModal('AI-помощник: План чтения', true, 'По какой книге или теме вы хотите составить план чтения? (Например, "Война и мир" или "Основы программирования")', '', 'Как эксперт по обучению и чтению');
                            };
                        }, 0);
                        break;
                        
                    case 'sugar':
                        pageTitle = 'САХАР';
                        pageContent = `
                            <div class="page-section">
                                <h3>Вред сахара</h3>
                                <p>Сахар стимулирует выработку дофамина — нейромедиатора, отвечающего за чувство удовольствия. Со временем мозг требует всё больше сахара для достижения того же эффекта, что приводит к формированию зависимости.</p>
                                <p>Некоторые исследования показывают, что сахарная зависимость может быть даже сложнее для лечения, чем героиновая, из-за её повсеместного распространения и социальной приемлемости.</p>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="sugar-craving">ТЯГА</button>
                                    <button class="sub-button" data-subpage="sugar-harm">ВРЕД</button>
                                    <button class="sub-button" data-subpage="sugar-refusal">ОТКАЗ</button>
                                    <button class="sub-button" data-subpage="sugar-resources">РЕСУРСЫ</button>
                                </div>
                                <button class="llm-button" id="llm-sugar-tips">✨Персональные советы</button>
                            </div>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-sugar-tips').onclick = () => {
                                showLlmModal('Персональные советы по сахару', true, 'Опишите ваши текущие привычки потребления сахара (например, "ем много сладкого каждый день", "иногда пью газировку")...');
                                llmModalSubmitButton.onclick = async () => {
                                    const habits = llmModalTextarea.value.trim();
                                    if (habits || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Дай персонализированные советы по снижению потребления сахара, учитывая мои привычки: "${habits}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-craving':
                        pageTitle = 'САХАР: ТЯГА';
                        pageContent = `
                            <div class="page-section">
                                <h3>Тяга к сахару</h3>
                                <p>Сахар стимулирует выработку дофамина — нейромедиатора, отвечающего за чувство удовольствия. Со временем мозг требует всё больше сахара для достижения того же эффекта, что приводит к формированию зависимости.</p>
                                <p>Некоторые исследования показывают, что сахарная зависимость может быть даже сложнее для лечения, чем героиновая, из-за её повсеместного распространения и социальной приемлемости.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/nzJdhXzjz1o?si=_RBZp5mTLtYF10Oj" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                                <p><i></i></p>
                            </div>
                            <button class="llm-button" id="llm-sugar-craving-help">✨Спросить AI о тяге к сахару</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-sugar-craving-help').onclick = () => {
                                showLlmModal('AI-помощник: Тяга к сахару', true, 'Как справиться с тягой к сладкому?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о тяге к сахару: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-harm':
                        pageTitle = 'САХАР: ВРЕД';
                        pageContent = `
                            <div class="page-section">
                                <h3>Вред сахара для организма:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="sugar-harm-obesity">Ожирение</button>
                                    <button class="sub-button" data-subpage="sugar-harm-diabetes">Диабет</button>
                                    <button class="sub-button" data-subpage="sugar-harm-heart">Сердце</button>
                                    <button class="sub-button" data-subpage="sugar-harm-skin">Кожа</button>
                                    <button class="sub-button" data-subpage="sugar-harm-teeth">Зубы</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-sugar-harm-info">✨Спросить AI о вреде сахара</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-sugar-harm-info').onclick = () => {
                                showLlmModal('AI-помощник: Вред сахара', true, 'Расскажи подробнее о вреде сахара для [орган/система].');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о вреде сахара: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-harm-obesity':
                        pageTitle = 'САХАР: ОЖИРЕНИЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Ожирение</h3>
                                <p>Сахар — источник "пустых" калорий, не дающих сытости, но способствующих накоплению жира и лишнему весу.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
                                    <iframe width="560" height="315" src="https://www.youtube.com/embed/20It6Yc8Cts?si=ZgzHk5JrGRsbNIhY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-obesity-info">✨Спросить AI об ожирении</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-obesity-info').onclick = () => {
                                showLlmModal('AI-помощник: Ожирение', true, 'Как сахар способствует ожирению?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос об ожирении, связанном с сахаром: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-harm-diabetes':
                        pageTitle = 'САХАР: ДИАБЕТ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Диабет</h3>
                                <p>Частое потребление сахара вызывает инсулинорезистентность — состояние, предшествующее развитию диабета.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
                                   <iframe width="560" height="315" src="https://www.youtube.com/embed/nOZbxalygkI?si=PCcPqSj-rBU0NBzq" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-diabetes-info">✨Спросить AI о диабете</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-diabetes-info').onclick = () => {
                                showLlmModal('AI-помощник: Диабет', true, 'Как предотвратить диабет, связанный с сахаром?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о диабете, связанном с сахаром: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-harm-heart':
                        pageTitle = 'САХАР: СЕРДЦЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Сердце</h3>
                                <p>Сахар повышает "плохой" холестерин (ЛПНП) и давление, увеличивая риск инфарктов и инсультов.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/yO4sh2TW3C0?si=Crg_hc2scaB6eJMr" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                                </div>
                            </div>
                            <button class="llm-button" id="llm-heart-info">✨Спросить AI о сердце</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-heart-info').onclick = () => {
                                showLlmModal('AI-помощник: Сердце', true, 'Как сахар влияет на здоровье сердца?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о влиянии сахара на сердце: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-harm-skin':
                        pageTitle = 'САХАР: КОЖА';
                        pageContent = `
                            <div class="page-section">
                                <h3>Кожа</h3>
                                <p>Избыток сахара ускоряет гликацию — процесс, разрушающий коллаген, что приводит к морщинам и потере упругости.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/CzAM0xvFd_I?si=2tGoD5whlDJtzLLA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                                </div>
                            </div>
                            <button class="llm-button" id="llm-skin-info">✨Спросить AI о коже</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-skin-info').onclick = () => {
                                showLlmModal('AI-помощник: Кожа', true, 'Как сахар влияет на кожу и старение?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о влиянии сахара на кожу: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-harm-teeth':
                        pageTitle = 'САХАР: ЗУБЫ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Зубы</h3>
                                <p>Сахар питает бактерии во рту, вызывающие кислотную эрозию эмали и развитие кариеса.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео по теме:</h3>
                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/ayXiizPs5lU?si=rN4lEzDPWFKN6Olj" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                                </div>
                            </div>
                            <button class="llm-button" id="llm-teeth-info">✨Спросить AI о зубах</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-teeth-info').onclick = () => {
                                showLlmModal('AI-помощник: Зубы', true, 'Как сахар разрушает зубы?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о влиянии сахара на зубы: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-refusal':
                        pageTitle = 'САХАР: ОТКАЗ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Как отказаться от сахара:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="sugar-refusal-nutrition">Питание</button>
                                    <button class="sub-button" data-subpage="sugar-refusal-regimen">Режим</button>
                                    <button class="sub-button" data-subpage="sugar-refusal-substitutes">Заменители</button>
                                    <button class="sub-button" data-subpage="sugar-refusal-activity">Активность</button>
                                    <button class="sub-button" data-subpage="sugar-refusal-support">Поддержка</button>
                                </div>
                                <div class="video-container" style="margin-top: 20px;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZBITF09zwGk?si=h3wX25beV8radpWv" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>        </div>
                            </div>
                            <button class="llm-button" id="llm-sugar-refusal-tips">✨Спросить AI об отказе от сахара</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-sugar-refusal-tips').onclick = () => {
                                showLlmModal('AI-помощник: Отказ от сахара', true, 'Дай советы по отказу от сахара.');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос об отказе от сахара: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-refusal-nutrition':
                        pageTitle = 'САХАР: ПИТАНИЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Питание</h3>
                                <p>Употребляйте больше белков и клетчатки, особенно в начале дня, чтобы стабилизировать уровень сахара в крови и уменьшить тягу к сладкому.</p>
                            
                            </div>
                            <button class="llm-button" id="llm-nutrition-tips">✨Спросить AI о питании</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-nutrition-tips').onclick = () => {
                                showLlmModal('AI-помощник: Питание', true, 'Какие продукты помогут снизить тягу к сахару?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о питании для отказа от сахара: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-refusal-regimen':
                        pageTitle = 'САХАР: РЕЖИМ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Режим</h3>
                                <p>Избегайте голодания, чтобы предотвратить резкие колебания уровня глюкозы и последующую тягу к сладкому.</p>
                            
                            </div>
                            <button class="llm-button" id="llm-regimen-tips">✨Спросить AI о режиме</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-regimen-tips').onclick = () => {
                                showLlmModal('AI-помощник: Режим', true, 'Как режим дня влияет на потребление сахара?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о режиме дня и его влиянии на сахар: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-refusal-substitutes':
                        pageTitle = 'САХАР: ЗАМЕНИТЕЛИ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Заменители</h3>
                                <p>Используйте натуральные подсластители, такие как стевия или ксилит, которые не вызывают резких скачков сахара в крови.</p>
                            </div>
                            
                            </div>
                            <button class="llm-button" id="llm-substitutes-info">✨Спросить AI о заменителях</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-substitutes-info').onclick = () => {
                                showLlmModal('AI-помощник: Заменители сахара', true, 'Какие натуральные заменители сахара существуют?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о заменителях сахара: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-refusal-activity':
                        pageTitle = 'САХАР: АКТИВНОСТЬ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Активность</h3>
                                <p>Регулярные упражнения помогают регулировать уровень сахара в крови и уменьшают стресс, который может провоцировать тягу к сладкому.</p>
                            
                            </div>
                            <button class="llm-button" id="llm-activity-info">✨Спросить AI об активности</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-activity-info').onclick = () => {
                                showLlmModal('AI-помощник: Активность', true, 'Как физическая активность помогает бороться с тягой к сахару?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о физической активности и сахаре: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-refusal-support':
                        pageTitle = 'САХАР: ПОДДЕРЖКА';
                        pageContent = `
                            <div class="page-section">
                                <h3>Поддержка</h3>
                                <p>Обратитесь к специалисту, если чувствуете, что не справляетесь самостоятельно.</p>
                            
                            </div>
                            <button class="llm-button" id="llm-support-info">✨Спросить AI о поддержке</button>
                        `
                        ;
                        setTimeout(() => {
                            document.getElementById('llm-support-info').onclick = () => {
                                showLlmModal('AI-помощник: Поддержка', true, 'Где найти поддержку при отказе от сахара?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о поддержке при отказе от сахара: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'sugar-resources':
                        pageTitle = 'САХАР: РЕСУРСЫ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Полезные ресурсы:</h3>
                                <ul>
                                    <li><a href="https://lifehacker.ru/zavisimost-ot-sahara/?utm_source" target="_blank">15 способов справиться с зависимостью от сахара </a></li>
                                    <li><a href="https://cgon.rospotrebnadzor.ru/naseleniyu/zdorovyy-obraz-zhizni/sakharnaya-zavisimost/?utm_source" target="_blank">Сахарная зависимость: мифы и факты </a></li>
                                    <li><a href="https://www.philips.ru/c-e/ho/recepty-i-stati/stati/o-zdorovye/kakie-opasnosti-tait-v-sebe-chrezmernoe-upotreblenie-sahara.html?utm_source" target="_blank">Вред употребления сахара: полный гайд </a></li>
                                    <li><a href="https://hi-food.ru/kak-otkazatsya-ot-sladkogo-i-muchnogo-raz-i-navsegda/?utm_source" target="_blank">Как отказаться от сладкого и мучного раз и навсегда </a></li>
                                </ul>
                            </div>
                            <button class="llm-button" id="llm-sugar-resources-help">✨Спросить AI о ресурсах</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-sugar-resources-help').onclick = () => {
                                showLlmModal('AI-помощник: Ресурсы по сахару', true, 'Посоветуй еще ресурсы по отказу от сахара.');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о ресурсах по отказу от сахара: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'skills':
                        pageTitle = 'НАВЫКИ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Развитие навыков:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-financial-intellectual">ФИНАНСОВЫЕ И ИНТЕЛЛЕКТУАЛЬНЫЕ</button>
                                    <button class="sub-button" data-subpage="skills-physical-mental">ФИЗИЧЕСКОЕ И МЕНТАЛЬНОЕ</button>
                                    <button class="sub-button" data-subpage="skills-educational-creative">ОБРАЗОВАТЕЛЬНЫЕ И ТВОРЧЕСКИЕ</button>
                                </div>
                                <button class="llm-button" id="llm-skill-plan">✨План обучения</button>
                            </div>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-skill-plan').onclick = () => {
                                showLlmModal('План обучения навыку', true, 'Какой навык вы хотите освоить? (например, "программирование на Python", "игра на гитаре")...');
                            };
                        }, 0);
                        break;
                    case 'skills-financial-intellectual':
                        pageTitle = 'НАВЫКИ: ФИНАНСЫ И ИНТЕЛЛЕКТ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Финансовые и интеллектуальные цели:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-finance-10k">Накопить 10,000</button>
                                    <button class="sub-button" data-subpage="skills-finance-20k">Накопить 20,000</button>
                                    <button class="sub-button" data-subpage="skills-finance-40k">Накопить 40,000</button>
                                    <button class="sub-button" data-subpage="skills-finance-60k">Накопить 60,000</button>
                                    <button class="sub-button" data-subpage="skills-finance-80k">Накопить 80,000</button>
                                    <button class="sub-button" data-subpage="skills-finance-100k">Накопить 100,000</button>
                                </div>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-books-1">Прочесть 1 книгу</button>
                                    <button class="sub-button" data-subpage="skills-books-2">Прочесть 2 книги</button>
                                    <button class="sub-button" data-subpage="skills-books-4">Прочесть 4 книги</button>
                                    <button class="sub-button" data-subpage="skills-books-8">Прочесть 8 книг</button>
                                    <button class="sub-button" data-subpage="skills-books-10">Прочесть 10 книг</button>
                                    <button class="sub-button" data-subpage="skills-books-12">Прочесть 12 книг</button>
                                </div>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-english-a1">Английский A1</button>
                                    <button class="sub-button" data-subpage="skills-english-a2">Английский A2</button>
                                    <button class="sub-button" data-subpage="skills-english-b1">Английский B1</button>
                                    <button class="sub-button" data-subpage="skills-english-b2">Английский B2</button>
                                    <button class="sub-button" data-subpage="skills-english-c1">Английский C1</button>
                                    <button class="sub-button" data-subpage="skills-english-c2">Английский C2</button>
                                </div>
                                <button class="sub-button" data-subpage="skills-sign-language">Выучить язык жестов</button>
                            </div>
                            <button class="llm-button" id="llm-financial-intellectual-help">✨Спросить AI</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-financial-intellectual-help').onclick = () => {
                                showLlmModal('AI-помощник: Финансы и интеллект', true, 'Как улучшить финансовую грамотность?', '', 'Как финансовый консультант и эксперт по обучению');
                            };
                        }, 0);
                        break;
                                            case 'movies':
                        pageTitle = 'ФИЛЬМЫ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Как смотреть фильмы бесплатно?</h3>
                                <p>Если вы ищете фильм на КиноПоиске, попробуйте добавить английскую букву "n" после  "https://www.kinopoisk.ru" в строке поиска после названия фильма (например, было: "https://www.kinopoisk.ru/film/258687/?utm_referrer" cтало: "https://www.kinopoisk.run/film/258687/?utm_referrer" ). Это может помочь найти альтернативные источники для просмотра.</p>
                            </div>
                                                        <button class="llm-button" id="llm-movie-suggest">✨Посоветовать фильм</button>
                            <button class="llm-button" id="llm-movie-analysis">✨Анализ фильма</button>
                            <div class="page-section">
                                <h3>Фильмы, которые заставляют задуматься:</h3>
                                <h4>Матрица (1999)</h4>
                                <p><strong>Идея:</strong> Реальность может быть не тем, чем кажется. Фильм исследует вопросы свободы воли, выбора и природы реальности.</p>
                                <p><strong>Чему учит:</strong> Ставить под сомнение привычное, искать истину, бороться за свои убеждения.</p>
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/45" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="page-section">
                                <h4>Бойцовский клуб (1999)</h4>
                                <p><strong>Идея:</strong> Критика потребительского общества и поиск идентичности в мире, где материальные блага доминируют.</p>
                                <p><strong>Чему учит:</strong> Переосмысливать ценности, противостоять конформизму, находить внутреннюю силу.</p>
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/46" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="page-section">
                                <h4>Интерстеллар (2014)</h4>
                                <p><strong>Идея:</strong> Исследование человеческого духа, любви, науки и пределов выживания в условиях космических путешествий.</p>
                                <p><strong>Чему учит:</strong> Ценить знания, стремиться к неизведанному, верить в себя и силу человеческих связей.</p>
                                <div class="video-container">
                                    <iframe src="https://www.youtube.com/embed/47" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>

                        `;
                        setTimeout(() => {
                            document.getElementById('llm-movie-suggest').onclick = () => {
                                showLlmModal('AI-помощник: Посоветовать фильм', true, 'Посоветуй фильм на тему [тема] или похожий на [название фильма].');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Посоветуй фильм: "${query}". Включи вымышленную ссылку на КиноПоиск в формате Markdown: [КиноПоиск](https://www.kinopoisk.ru/film/123456/) и вымышленную ссылку на постер в формате Markdown: ![Постер фильма](https://placehold.co/150x200/000000/FFFFFF?text=Постер+фильма). Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                            document.getElementById('llm-movie-analysis').onclick = () => {
                                showLlmModal('AI-помощник: Анализ фильма', true, 'Введите название фильма для анализа его идей и уроков...');
                                llmModalSubmitButton.onclick = async () => {
                                    const movieTitle = llmModalTextarea.value.trim();
                                    if (movieTitle || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Проанализируй фильм "${movieTitle}". Опиши его основные идеи и чему он может научить. Включи вымышленную ссылку на КиноПоиск в формате Markdown: [КиноПоиск](https://www.kinopoisk.ru/film/123456/) и вымышленную ссылку на постер в формате Markdown: ![Постер фильма](https://placehold.co/150x200/000000/FFFFFF?text=Постер+фильма). Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'skills-physical-mental':
                        pageTitle = 'НАВЫКИ: ФИЗИЧЕСКОЕ И МЕНТАЛЬНОЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Физическое и ментальное развитие:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-sport-1day">Спорт дома — день 1</button>
                                    <button class="sub-button" data-subpage="skills-sport-5day">Спорт дома — день 5</button>
                                    <button class="sub-button" data-subpage="skills-sport-10day">Спорт дома — день 10</button>
                                    <button class="sub-button" data-subpage="skills-sport-15day">Спорт дома — день 15</button>
                                    <button class="sub-button" data-subpage="skills-sport-20day">Спорт дома — день 20</button>
                                    <button class="sub-button" data-subpage="skills-sport-30day">Спорт дома — день 30</button>
                                </div>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-meditation-1day">Медитация — день 1</button>
                                    <button class="sub-button" data-subpage="skills-meditation-5day">Медитация — день 5</button>
                                    <button class="sub-button" data-subpage="skills-meditation-10day">Медитация — день 10</button>
                                    <button class="sub-button" data-subpage="skills-meditation-15day">Медитация — день 15</button>
                                    <button class="sub-button" data-subpage="skills-meditation-20day">Медитация — день 20</button>
                                    <button class="sub-button" data-subpage="skills-meditation-30day">Медитация — день 30</button>
                                </div>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-habits-0day">100 дней без (вредных привычек) — 0</button>
                                    <button class="sub-button" data-subpage="skills-habits-10day">100 дней без (вредных привычек) — 10</button>
                                    <button class="sub-button" data-subpage="skills-habits-40day">100 дней без (вредных привычек) — 40</button>
                                    <button class="sub-button" data-subpage="skills-habits-100day">100 дней без (вредных привычек) — 100</button>
                                </div>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-sugar-1day">Сахар — 1 день</button>
                                    <button class="sub-button" data-subpage="skills-sugar-5day">Сахар — 5 дней</button>
                                    <button class="sub-button" data-subpage="skills-sugar-10day">Сахар — 10 дней</button>
                                    <button class="sub-button" data-subpage="skills-sugar-15day">Сахар — 15 дней</button>
                                    <button class="sub-button" data-subpage="skills-sugar-20day">Сахар — 20 дней</button>
                                    <button class="sub-button" data-subpage="skills-sugar-30day">Сахар — 30 дней</button>
                                </div>
                                <button class="sub-button" data-subpage="skills-healthy-eating">Правильное питание</button>
                                <button class="sub-button" data-subpage="skills-better-sleep">Лучше спать</button>
                                <button class="sub-button" data-subpage="skills-fat-percent">Нормализовать % жира</button>
                            </div>
                            <button class="llm-button" id="llm-physical-mental-help">✨Спросить AI</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-physical-mental-help').onclick = () => {
                                showLlmModal('AI-помощник: Физическое и ментальное', true, 'Как улучшить ментальное здоровье?', '', 'Как фитнес-тренер и специалист по ментальному здоровью');
                            };
                        }, 0);
                        break;
                    case 'skills-educational-creative':
                        pageTitle = 'НАВЫКИ: ОБРАЗОВАТЕЛЬНЫЕ И ТВОРЧЕСКИЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Образовательные и творческие навыки:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="skills-wimhof">Техника Вим Хофа</button>
                                    <button class="sub-button" data-subpage="skills-notebook">Вести блокнот</button>
                                    <button class="sub-button" data-subpage="skills-diction">Заниматься дикцией</button>
                                    <button class="sub-button" data-subpage="skills-3d-blender">3D-блендер</button>
                                    <button class="sub-button" data-subpage="skills-drawing">Научиться рисовать</button>
                                    <button class="sub-button" data-subpage="skills-timemanagement">Настроить тайм-менеджмент</button>
                                    <button class="sub-button" data-subpage="skills-rubikscube">Сборка кубика Рубика</button>
                                    <button class="sub-button" data-subpage="skills-math-logic">Учить математику / логические стили</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-educational-creative-help">✨Спросить AI</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-educational-creative-help').onclick = () => {
                                showLlmModal('AI-помощник: Образование и творчество', true, 'Как начать учиться играть на гитаре?', '', 'Как образовательный и творческий наставник');
                            };
                        }, 0);
                        break;
                                            case 'lessons':
                        pageTitle = 'УРОКИ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Выберите категорию уроков:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="lessons-languages">ЯЗЫКИ</button>
                                    <button class="sub-button" data-subpage="lessons-sciences">НАУКИ</button>
                                    <button class="sub-button" data-subpage="lessons-programming">ПРОГРАММИРОВАНИЕ</button>
                                    <button class="sub-button" data-subpage="lessons-art-design">ИСКУССТВО И ДИЗАЙН</button>
                                    <button class="sub-button" data-subpage="lessons-personal-dev">ЛИЧНОСТНОЕ РАЗВИТИЕ</button>
                                </div>
                                <button class="llm-button" id="llm-lesson-help">✨Спросить AI об уроках</button>
                                <button class="llm-button" id="llm-create-lesson">✨Создать краткий урок</button>
                            </div>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-lesson-help').onclick = () => {
                                showLlmModal('AI-помощник: Уроки', true, 'Объясни концепцию [название концепции] или предложи ресурсы для изучения [предмет].');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос об уроках: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                            document.getElementById('llm-create-lesson').onclick = () => {
                                showLlmModal('AI-помощник: Создать краткий урок', true, 'На какую тему вы хотите создать краткий урок?');
                                llmModalSubmitButton.onclick = async () => {
                                    const topic = llmModalTextarea.value.trim();
                                    if (topic || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Создай краткий урок на тему "${topic}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'lessons-languages':
                        pageTitle = 'УРОКИ: ЯЗЫКИ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Изучение языков:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="lesson-english">Английский язык</button>
                                    <button class="sub-button" data-subpage="lesson-spanish">Испанский язык</button>
                                    <button class="sub-button" data-subpage="lesson-german">Немецкий язык</button>
                                    <button class="sub-button" data-subpage="lesson-french">Французский язык</button>
                                    <button class="sub-button" data-subpage="lesson-chinese">Китайский язык</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-language-help">✨Спросить AI о языках</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-language-help').onclick = () => {
                                showLlmModal('AI-помощник: Языки', true, 'Как быстро выучить новый язык?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о языках: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'lessons-sciences':
                        pageTitle = 'УРОКИ: НАУКИ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Изучение наук:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="lesson-physics">Физика</button>
                                    <button class="sub-button" data-subpage="lesson-chemistry">Химия</button>
                                    <button class="sub-button" data-subpage="lesson-biology">Биология</button>
                                    <button class="sub-button" data-subpage="lesson-astronomy">Астрономия</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-science-help">✨Спросить AI о науках</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-science-help').onclick = () => {
                                showLlmModal('AI-помощник: Науки', true, 'Как лучше понять [название научной концепции]?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о науках: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'lessons-programming':
                        pageTitle = 'УРОКИ: ПРОГРАММИРОВАНИЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Изучение программирования:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="lesson-python">Программирование на Python</button>
                                    <button class="sub-button" data-subpage="lesson-javascript">Программирование на JavaScript</button>
                                    <button class="sub-button" data-subpage="lesson-webdev">Веб-разработка</button>
                                    <button class="sub-button" data-subpage="lesson-mobiledev">Мобильная разработка</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-programming-help">✨Спросить AI о программировании</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-programming-help').onclick = () => {
                                showLlmModal('AI-помощник: Программирование', true, 'Какой язык программирования лучше выбрать для начинающих?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о программировании: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'lessons-art-design':
                        pageTitle = 'УРОКИ: ИСКУССТВО И ДИЗАЙН';
                        pageContent = `
                            <div class="page-section">
                                <h3>Изучение искусства и дизайна:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="lesson-graphicdesign">Графический дизайн</button>
                                    <button class="sub-button" data-subpage="lesson-musictheory">Музыкальная теория</button>
                                    <button class="sub-button" data-subpage="lesson-photography">Фотография</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-art-design-help">✨Спросить AI об искусстве и дизайне</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-art-design-help').onclick = () => {
                                showLlmModal('AI-помощник: Искусство и Дизайн', true, 'Как начать заниматься рисованием?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос об искусстве и дизайне: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'lessons-personal-dev':
                        pageTitle = 'УРОКИ: ЛИЧНОСТНОЕ РАЗВИТИЕ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Изучение личного развития:</h3>
                                <div class="button-grid">
                                    <button class="sub-button" data-subpage="lesson-publicspeaking">Публичные выступления</button>
                                    <button class="sub-button" data-subpage="lesson-criticalthinking">Критическое мышление</button>
                                    <button class="sub-button" data-subpage="lesson-emotionalintelligence">Эмоциональный интеллект</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-personal-dev-help">✨Спросить AI о личностном развитии</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-personal-dev-help').onclick = () => {
                                showLlmModal('AI-помощник: Личностное развитие', true, 'Как улучшить навыки общения?');
                                llmModalSubmitButton.onclick = async () => {
                                    const query = llmModalTextarea.value.trim();
                                    if (query || currentImageBase64) {
                                        llmModalInputArea.classList.add('hidden');
                                        llmModalResponseArea.classList.remove('hidden');
                                        await callGeminiAPI(`Ответь на вопрос о личностном развитии: "${query}". Включи ссылки на полезные ресурсы и места для практики.`, llmModalResponseText, llmModalLoading, null, currentImageBase64);
                                    }
                                };
                            };
                        }, 0);
                        break;
                    case 'why-live':
                        pageTitle = 'ЗАЧЕМ ЖИТЬ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Поиск смысла жизни</h3>
                                <p>Вопрос о смысле жизни волновал людей на протяжении веков. Для каждого ответ может быть уникальным, но часто он связан с поиском цели, самореализацией, отношениями с близкими, служением другим или стремлением к знаниям.</p>
                                <p>Подумайте, что приносит вам радость, что вас вдохновляет, какие ценности для вас важны. Смысл жизни — это не что-то, что можно найти, а что-то, что создается вами каждый день.</p>
                            </div>
                            <div class="page-section">
                                <h3>Видео и ресурсы:</h3>
                                                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/NX-ZJ-d27Fc?si=0loyiFtM9kOeq5U7" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                                </div>
<div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/PUZaJtvb2-k?si=oecua7pNbxLhkSDd" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe> </div>
                                <ul>
                                    <li><a href="</a></li>
                                    <li><a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BC%D1%8B%D1%81%D0%BB_%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8" target="_blank">Смысл жизни на Википедии</a></li>
                                </ul>
                            </div>
                            <button class="llm-button" id="llm-why-live-help">✨Спросить AI о смысле жизни</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-why-live-help').onclick = () => {
                                showLlmModal('AI-помощник: Смысл жизни', true, 'Что такое смысл жизни для меня?');
                            };
                        }, 0);
                        break;
                    case 'lofi':
                        pageTitle = 'LO-FI';
                        pageContent = `
                            <div class="page-section">
                                <h3>Lo-Fi Музыка для Фокуса и Расслабления</h3>
                                <p>Lo-fi музыка идеально подходит для учебы, работы или просто для расслабления. Ее мягкие ритмы и атмосферные звуки помогают сосредоточиться и снизить стресс.</p>
                            </div>
                            <div class="page-section">
                                <h3>Прямая трансляция Lo-Fi:</h3>
                                <div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/jfKfPfyJRdk?si=hOcJCWJRK8C_Z_fW" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>                                </div>
                            </div>
                            <button class="llm-button" id="llm-lofi-info">✨Спросить AI о Lo-Fi</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-lofi-info').onclick = () => {
                                showLlmModal('AI-помощник: Lo-Fi', true, 'Расскажи о пользе Lo-Fi музыки для продуктивности.');
                            };
                        }, 0);
                        break;
                    case 'pomodoro':
                        pageTitle = 'МЕТОД ПОМИДОРА';
                        pageContent = `
                            <div class="page-section">
                                <h3>Техника Pomodoro</h3>
                                <p>Техника Pomodoro — это метод управления временем, разработанный Франческо Чирилло в конце 1980-х. Он использует таймер для разбиения работы на 25-минутные интервалы, разделённые короткими перерывами.</p>
                                <ol>
                                    <li>Выберите задачу.</li>
                                    <li>Установите таймер на 25 минут (один "помидор").</li>
                                    <li>Работайте, не отвлекаясь, пока таймер не прозвонит.</li>
                                    <li>Сделайте короткий перерыв (3-5 минут).</li>
                                    <li>После каждых четырех "помидоров" делайте длинный перерыв (15-30 минут).</li>
                                </ol>
                            </div>
                            <div class="page-section flex-center" style="flex-direction: column;">
                                <h3>Таймер Pomodoro</h3>
                                <div id="pomodoro-timer">25:00</div>
                                <div class="timer-controls">
                                    <button id="pomodoro-start">Старт</button>
                                    <button id="pomodoro-pause">Пауза</button>
                                    <button id="pomodoro-reset">Сброс</button>
                                </div>
                            </div>
                            <button class="llm-button" id="llm-pomodoro-tips">✨Спросить AI о продуктивности</button>
                        `;
                        // Прикрепление обработчиков событий для кнопок Pomodoro после загрузки контента
                        setTimeout(() => {
                            document.getElementById('pomodoro-start').onclick = startPomodoro;
                            document.getElementById('pomodoro-pause').onclick = pausePomodoro;
                            document.getElementById('pomodoro-reset').onclick = resetPomodoro;
                            updatePomodoroDisplay();

                            document.getElementById('llm-pomodoro-tips').onclick = () => {
                                showLlmModal('AI-помощник: Продуктивность', true, 'Как эффективно использовать метод Pomodoro?');
                            };
                        }, 0);
                        break;
                    case 'career-guidance':
                        pageTitle = 'ПРОФОРИЕНТАЦИЯ';
                        pageContent = `
                            <div class="page-section">
                                <h3>Выбор карьерного пути</h3>
                                <p>Профориентация помогает определить ваши сильные стороны, интересы и ценности для выбора подходящей профессии. Это важный шаг в построении успешной карьеры.</p>
                            </div>
                            <div class="page-section">
                                <h3>Ресурсы:</h3>
                                <ul>
                                    <li><a href="https://youtu.be/Uc92F9PPo4k?si=PHXWmwch0-OIIMkE" target="_blank">Как выбрать профессию? (Видео)</a></li>
                                    <li><a href="https://youtu.be/dT-ij2IQ7u4?si=J6AoeDfiWoAMSf0T" target="_blank">Самая МОЩНАЯ практика саморазвития. (Видео)</a></li>
                                    <li><a href="https://www.proforientator.ru/" target="_blank">Профориентатор (Сайт)</a></li>
                                </ul>
                            </div>
                            <button class="llm-button" id="llm-career-help">✨Спросить AI о карьере</button>
                        `;
                        setTimeout(() => {
                            document.getElementById('llm-career-help').onclick = () => {
                                showLlmModal('AI-помощник: Профориентация', true, 'Как мне выбрать профессию по душе?');
                            };
                        }, 0);
                        break;
                    case 'motivation-goals':
    pageTitle = 'МОТИВАЦИЯ И ЦЕЛИ';
    pageContent = `
        <div class="page-section">
            <h3>Выберите вариант мотивации:</h3>
            <div class="button-grid">
                <button class="llm-button" id="llm-daily-motivation">☀️ Дневная мотивация</button>
                <button class="llm-button" id="llm-set-goal">🎯 Поставить цель</button>
                <button class="llm-button" id="llm-specific-motivation">⚡ Мотивация в деле</button>
            </div>
        </div>
    `;

    setTimeout(() => {
        document.getElementById('llm-daily-motivation').onclick = () => {
            showLlmModal('Дневная мотивация от AI', false, '', 'Поделись короткой мотивацией на сегодня.');
        };

        document.getElementById('llm-set-goal').onclick = () => {
            showLlmModal('Поставить цель с AI', true, 'Какую цель ты хочешь поставить?', '', 'Как коуч по целям');
        };

        document.getElementById('llm-specific-motivation').onclick = () => {
            showLlmModal('Мотивация в конкретном деле', true, 'В каком деле тебе нужна мотивация?', '', 'Как мотивационный тренер');
        };
    }, 0);

    break;

                    case 'github':
                        pageTitle = 'Разработчик';
                        pageContent = `
                            <div class="page-section">
                                <h3>Ренард</h3>
                                <p>Соцсети:</p>
                                <a href="https://www.instagram.com/renard____?igsh=NHV1MnZvYTNlZmhu" target="_blank" class="llm-button">instagram</a>
                                <a href="https://www.tiktok.com/@renard.mr?_t=ZS-8wovYoDbJ1L&_r=1" target="_blank" class="llm-button">tiktok</a>
                                <p>Дата рождения: 3 сентября 2010</p>
                            </div>
                        `;
                        break;
                    default:
                        pageTitle = 'Путь Развития';
                        pageContent = `
                            <div class="page-section">
                                <h3>Страница не найдена</h3>
                                <p>Запрошенная страница не существует. Вернитесь на главную.</p>
                            </div>
                        `;
                }
            }

            // Создаем элемент страницы
            const pageElement = document.createElement('div');
            pageElement.id = pageId;
            pageElement.classList.add('page');
            pageElement.innerHTML = `
                <h1 class="page-title">${pageTitle}</h1>
                ${pageContent}
            `;

            appContainer.appendChild(pageElement);

            // Добавляем обработчики событий для кнопок
            const mainButtons = pageElement.querySelectorAll('.main-button[data-page]');
            mainButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showPage(button.dataset.page);
                });
            });

            const subButtons = pageElement.querySelectorAll('.sub-button[data-subpage]');
            subButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showPage(button.dataset.subpage);
                });
            });
        }

        /**
         * Запускает таймер Pomodoro.
         */
        function startPomodoro() {
            if (!isPomodoroRunning) {
                isPomodoroRunning = true;
                pomodoroTimerInterval = setInterval(() => {
                    pomodoroTimeLeft--;
                    updatePomodoroDisplay();
                    if (pomodoroTimeLeft <= 0) {
                        clearInterval(pomodoroTimerInterval);
                        isPomodoroRunning = false;
                        pomodoroSound.play();
                        showMessageBox("Время Pomodoro истекло! Сделайте перерыв.");
                    }
                }, 1000);
            }
        }

        /**
         * Ставит таймер Pomodoro на паузу.
         */
        function pausePomodoro() {
            if (isPomodoroRunning) {
                clearInterval(pomodoroTimerInterval);
                isPomodoroRunning = false;
            }
        }

        /**
         * Сбрасывает таймер Pomodoro.
         */
        function resetPomodoro() {
            clearInterval(pomodoroTimerInterval);
            isPomodoroRunning = false;
            pomodoroTimeLeft = 25 * 60;
            updatePomodoroDisplay();
        }

        /**
         * Обновляет отображение таймера Pomodoro.
         */
        function updatePomodoroDisplay() {
            const minutes = Math.floor(pomodoroTimeLeft / 60);
            const seconds = pomodoroTimeLeft % 60;
            document.getElementById('pomodoro-timer').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        /**
         * Очищает предварительный просмотр изображения.
         * @param {HTMLImageElement} previewElement - Элемент изображения.
         * @param {HTMLElement} containerElement - Контейнер предварительного просмотра.
         */
        function clearImagePreview(previewElement, containerElement) {
            previewElement.src = '';
            containerElement.classList.add('hidden');
            currentImageBase64 = null;
        }

        /**
         * Обрабатывает загрузку изображения.
         * @param {Event} event - Событие загрузки файла.
         */
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    currentImageBase64 = e.target.result;
                    if (currentImageTarget === 'chat') {
                        chatImagePreview.src = currentImageBase64;
                        chatImagePreviewContainer.classList.remove('hidden');
                    } else if (currentImageTarget === 'llm-modal') {
                        llmModalImagePreview.src = currentImageBase64;
                        llmModalImagePreviewContainer.classList.remove('hidden');
                    }
                };
                reader.readAsDataURL(file);
            }
            // Сброс значения input, чтобы можно было загрузить тот же файл снова
            event.target.value = '';
        }

        /**
         * Произносит текст с использованием синтеза речи.
         * @param {string} text - Текст для произнесения.
         */
        function speakText(text) {
            if (isSpeaking) {
                synth.cancel();
                isSpeaking = false;
                return;
            }

            if (synth.speaking) {
                synth.cancel();
            }

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ru-RU';
            utterance.rate = 1.0;
            utterance.onend = () => {
                isSpeaking = false;
            };

            utterance.onerror = (event) => {
                console.error('Ошибка синтеза речи:', event);
                isSpeaking = false;
            };

            synth.speak(utterance);
            isSpeaking = true;
        }

        // --- Инициализация ---
        document.addEventListener('DOMContentLoaded', () => {
            // Инициализация истории навигации
            historyStack.push('home');
            showPage('home', false);

            // Инициализация музыки
            backgroundMusic.src = musicTracks[currentTrackIndex];
            musicPlayPauseButton.innerHTML = '<i class="fas fa-play"></i>'; // Начальная иконка - play

            // Обработчики событий для управления музыкой
            musicHamburger.addEventListener('click', () => {
                musicMenu.classList.toggle('show');
            });

            musicPlayPauseButton.addEventListener('click', () => {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    musicPlayPauseButton.innerHTML = '<i class="fas fa-play"></i>';
                } else {
                    backgroundMusic.play();
                    musicPlayPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
                }
                isMusicPlaying = !isMusicPlaying;
            });

            musicNextButton.addEventListener('click', () => {
                currentTrackIndex = (currentTrackIndex + 1) % musicTracks.length;
                backgroundMusic.src = musicTracks[currentTrackIndex];
                if (isMusicPlaying) {
                    backgroundMusic.play();
                }
            });

            musicPrevButton.addEventListener('click', () => {
                currentTrackIndex = (currentTrackIndex - 1 + musicTracks.length) % musicTracks.length;
                backgroundMusic.src = musicTracks[currentTrackIndex];
                if (isMusicPlaying) {
                    backgroundMusic.play();
                }
            });

            // Навигация назад
            backButton.addEventListener('click', () => {
                if (historyStack.length > 1) {
                    historyStack.pop(); // Удаляем текущую страницу
                    const prevPage = historyStack[historyStack.length - 1];
                    showPage(prevPage, false);
                }
            });

            // Чат поддержки Telegram
            supportChatButton.addEventListener('click', () => {
                window.open('https://t.me/ChatPovsednevka', '_blank');
            });

            // Инициализация основного чата AI
            supportAiButton.addEventListener('click', () => {
                chatContainer.classList.remove('hidden');
                mainFooter.classList.add('hidden-on-chat'); // Скрываем футер при открытии чата
            });

            chatToggleButton.addEventListener('click', () => {
                chatContainer.classList.toggle('expanded');
                const icon = chatToggleButton.querySelector('i');
                if (chatContainer.classList.contains('expanded')) {
                    icon.classList.remove('fa-chevron-up');
                    icon.classList.add('fa-chevron-down');
                } else {
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-up');
                }
            });

            chatCloseButton.addEventListener('click', () => {
                chatContainer.classList.add('hidden');
                mainFooter.classList.remove('hidden-on-chat'); // Показываем футер при закрытии чата
            });

            sendChatButton.addEventListener('click', sendAIChatMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendAIChatMessage();
                }
            });

            // Обработчики для вложений в чате
            chatAttachmentButton.addEventListener('click', () => {
                currentImageTarget = 'chat';
                imageUploadChoiceModal.classList.remove('hidden');
            });

            // Обработчики для вложений в модальном окне LLM
            llmModalAttachmentButton.addEventListener('click', () => {
                currentImageTarget = 'llm-modal';
                imageUploadChoiceModal.classList.remove('hidden');
            });

            // Обработчики для кнопок выбора источника изображения
            takePhotoButton.addEventListener('click', () => {
                imageUploadChoiceModal.classList.add('hidden');
                imageUploadCamera.click();
            });

            chooseFromDeviceButton.addEventListener('click', () => {
                imageUploadChoiceModal.classList.add('hidden');
                imageUploadFile.click();
            });

            imageUploadChoiceCancelButton.addEventListener('click', () => {
                imageUploadChoiceModal.classList.add('hidden');
            });

            // Обработчики загрузки изображений
            imageUploadCamera.addEventListener('change', handleImageUpload);
            imageUploadFile.addEventListener('change', handleImageUpload);

            // Обработчики для кнопок очистки изображений
            chatClearImageButton.addEventListener('click', () => {
                clearImagePreview(chatImagePreview, chatImagePreviewContainer);
            });

            llmModalClearImageButton.addEventListener('click', () => {
                clearImagePreview(llmModalImagePreview, llmModalImagePreviewContainer);
            });

            // Закрытие модальных окон
            llmModalCloseButton.addEventListener('click', hideLlmModal);
            messageBoxCloseButton.addEventListener('click', hideMessageBox);

            // Отправка формы в модальном окне LLM
            llmModalSubmitButton.addEventListener('click', async () => {
                const prompt = llmModalTextarea.value.trim();
                const aiPersona = llmModalSubmitButton.dataset.aiPersona || '';
                const initialPrompt = llmModalSubmitButton.dataset.initialPrompt || '';
                const fullPrompt = aiPersona ? `${aiPersona}, ${initialPrompt} ${prompt}` : `${initialPrompt} ${prompt}`;

                if (prompt || currentImageBase64) {
                    llmModalInputArea.classList.add('hidden');
                    llmModalResponseArea.classList.remove('hidden');

                    const userParts = [];
                    if (prompt) {
                        userParts.push({ text: fullPrompt });
                    }
                    if (currentImageBase64) {
                        userParts.push({
                            inlineData: {
                                mimeType: currentImageBase64.split(',')[0].split(':')[1].split(';')[0],
                                data: currentImageBase64.split(',')[1]
                            }
                        });
                    }

                    // Используем пустую историю для модального окна, так как это отдельное взаимодействие
                    await callGeminiAPI([], userParts, llmModalResponseText, llmModalLoading);
                }
            });

            // Инициализация распознавания речи (Web Speech API)
            if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'ru-RU';
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    if (currentImageTarget === 'chat') {
                        chatInput.value = transcript;
                    } else if (currentImageTarget === 'llm-modal') {
                        llmModalTextarea.value = transcript;
                    }
                };

                recognition.onerror = (event) => {
                    showMessageBox(`Ошибка распознавания речи: ${event.error}`);
                };

                micButton.addEventListener('click', () => {
                    if (isRecognizing) {
                        recognition.stop();
                        isRecognizing = false;
                        micButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    } else {
                        currentImageTarget = 'chat';
                        recognition.start();
                        isRecognizing = true;
                        micButton.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                    }
                });
            } else {
                micButton.style.display = 'none';
                showMessageBox("Ваш браузер не поддерживает распознавание речи.");
            }
        });
    </script>
</body>
</html>
